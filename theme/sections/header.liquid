{% comment %}
  Header Section - Refactored to use components
{% endcomment %}

<header class="fixed w-full top-0 z-50 transition-all duration-300 header-wrapper header-transparent" id="header">
  <div class="flex items-center justify-between px-4 md:px-8 py-6 max-w-7xl mx-auto">
    <!-- Left: Mobile Menu Button / Desktop Logo -->
    <div class="flex items-center flex-shrink-0">
      <!-- Mobile Menu Button (Desktop Hidden) -->
      <button
        class="block md:hidden bg-black/30 backdrop-blur-sm border-0 text-white cursor-pointer p-3 rounded-lg transition-all duration-300 hover:text-primary hover:bg-black/50"
        id="mobile-menu-toggle"
        aria-label="Open mobile menu"
      >
        {% render 'ui-icon', name: 'menu', classes: 'w-6 h-6' %}
      </button>

      <!-- Desktop Logo -->
      <div class="flex-shrink-0 hidden md:block">
        {% if section.settings.logo != blank %}
          <a href="{{ routes.root_url }}">
            <img
              src="{{ section.settings.logo | image_url: width: 233 }}"
              alt="{{ shop.name }}"
              class="h-14 lg:h-16 w-auto transition-transform duration-300 cursor-pointer hover:scale-105"
              width="233"
              height="70"
            >
          </a>
        {% else %}
          <a
            href="{{ routes.root_url }}"
            class="text-2xl font-bold text-white hover:text-primary transition-colors duration-300"
          >
            {{ shop.name }}
          </a>
        {% endif %}
      </div>
    </div>

    <!-- Center: Desktop Navigation -->
    {% render 'layout-navigation' %}

    <!-- Right: Actions -->
    <div class="flex items-center space-x-4">
      {% if section.settings.discord_url != blank %}
        {% render 'ui-button',
          text: 'Discord',
          url: section.settings.discord_url,
          variant: 'outline',
          size: 'small',
          icon: 'discord',
          classes: 'hidden md:inline-flex'
        %}
      {% endif %}

      <!-- Mobile Logo (Mobile Only) -->
      <div class="flex-shrink-0 block md:hidden">
        {% if section.settings.logo != blank %}
          <a href="{{ routes.root_url }}">
            <img
              src="{{ section.settings.logo | image_url: width: 120 }}"
              alt="{{ shop.name }}"
              class="h-10 w-auto transition-transform duration-300 cursor-pointer hover:scale-105"
              width="120"
              height="36"
            >
          </a>
        {% else %}
          <a
            href="{{ routes.root_url }}"
            class="text-xl font-bold text-white hover:text-primary transition-colors duration-300"
          >
            {{ shop.name }}
          </a>
        {% endif %}
      </div>

      <!-- Cart Icon -->
      <a
        href="{{ routes.cart_url }}"
        class="relative p-2 text-white hover:text-primary transition-colors duration-300"
        aria-label="View cart"
      >
        {% render 'ui-icon', name: 'shopping-cart', classes: 'w-6 h-6' %}
        <span
          class="absolute -top-1 -right-1 bg-primary text-black text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold"
          id="cart-count"
        >
          {{ cart.item_count }}
        </span>
      </a>
    </div>
  </div>
</header>

<!-- Mobile Menu -->
{% render 'layout-mobile-menu' %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const header = document.getElementById('header');

    // Header scroll effect
    window.addEventListener('scroll', function () {
      if (window.scrollY > 50) {
        header.classList.add('header-scrolled');
        header.classList.remove('header-transparent');
      } else {
        header.classList.remove('header-scrolled');
        header.classList.add('header-transparent');
      }
    });
  });
</script>

<style>
  .header-transparent {
    background: rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
  }

  .header-scrolled {
    background: rgba(0, 0, 0, 0.95);
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
  }
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "url",
      "id": "discord_url",
      "label": "Discord URL"
    }
  ]
}
{% endschema %}
