{%- style -%}
  .featured-products {
    padding: 2rem 1rem;
    background: #1a1b26;
  }

  .featured-products-container {
    max-width: 1400px;
    margin: 0 auto;
  }

  .featured-products-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
  }

  .featured-products-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: #ffffff;
    margin: 0;
  }

  .view-all-btn {
    display: inline-flex;
    align-items: center;
    padding: 0.4rem 0.8rem;
    background: transparent;
    color: #ffd800;
    border: 1px solid #ffd800;
    text-decoration: none;
    font-weight: 500;
    border-radius: 4px;
    transition: all 0.2s ease;
    font-size: 0.85rem;
  }

  .view-all-btn:hover {
    background: #ffd800;
    color: #000;
  }

  .products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 1rem;
    justify-items: center;
  }

  .product-card {
    background: #2a2d3a;
    border-radius: 6px;
    overflow: hidden;
    border: 1px solid #3a3d4a;
    width: 100%;
    max-width: 220px;
  }

  .product-image-container {
    width: 100%;
    height: 180px;
    overflow: hidden;
  }

  .product-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .product-info {
    padding: 1rem;
    text-align: center;
  }

  .product-title {
    font-size: 1.3rem;
    font-weight: 600;
    color: #ffffff;
    margin: 0 0 0.25rem 0;
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    min-height: 3.4rem;
  }

  .product-title a {
    color: inherit;
    text-decoration: none;
  }

  .product-price {
    font-size: 1.5rem;
    font-weight: 700;
    color: #ffd800;
    margin: 0;
  }

  .product-price .compare-price {
    text-decoration: line-through;
    color: #9ca3af;
    margin-right: 0.5rem;
    font-size: 1.2rem;
    font-weight: 500;
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .featured-products {
      padding: 1.5rem 1rem;
    }

    .featured-products-header {
      flex-direction: column;
      gap: 1rem;
      text-align: center;
      margin-bottom: 1rem;
    }

    .products-grid {
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 0.75rem;
    }

    .product-card {
      max-width: 200px;
    }

    .product-image-container {
      height: 160px;
    }

    .product-info {
      padding: 0.75rem;
    }

    .product-title {
      font-size: 1.1rem;
      min-height: 2.8rem;
    }

    .product-price {
      font-size: 1.3rem;
    }
  }

  @media (max-width: 480px) {
    .products-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 0.5rem;
    }

    .product-card {
      max-width: 180px;
    }

    .product-image-container {
      height: 140px;
    }

    .product-info {
      padding: 0.6rem;
    }

    .product-title {
      font-size: 1rem;
      min-height: 2.6rem;
    }

    .product-price {
      font-size: 1.2rem;
    }
  }
{%- endstyle -%}

<section class="featured-products">
  <div class="featured-products-container">
    <div class="featured-products-header">
      <h2 class="featured-products-title">Featured Items</h2>
      <a href="{{ section.settings.view_all_link | default: '/collections/all' }}" class="view-all-btn"> View all â†’ </a>
    </div>

    <div class="products-grid">
      {% if section.settings.collection != blank %}
        {% assign products = section.settings.collection.products | slice: 0, section.settings.products_to_show %}
        {% for product in products %}
          <div class="product-card">
            <div class="product-image-container">
              {% if product.featured_image != blank %}
                <img
                  src="{{ product.featured_image | image_url: width: 300 }}"
                  alt="{{ product.title }}"
                  class="product-image"
                  width="220"
                  height="180"
                  loading="lazy"
                >
              {% else %}
                <div
                  class="product-image"
                  style="background: #3a3d4a; display: flex; align-items: center; justify-content: center; color: #9ca3af; font-size: 0.8rem;"
                >
                  No Image
                </div>
              {% endif %}
            </div>

            <div class="product-info">
              <h3 class="product-title">
                <a href="{{ product.url }}">{{ product.title }}</a>
              </h3>
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="compare-price">{{ product.compare_at_price | money }}</span>
                {% endif %}
                {{ product.price | money }}
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <!-- Demo Products -->
        {% assign demo_products = '10T.jpg,DISCO-BEE.jpg,DRAGONFLY.jpg,FENNEC.jpg,RACCOON.jpg' | split: ',' %}
        {% assign demo_names = '10 Trillion Sheckles,Disco Bee,Dragonfly,Fennec Fox,Raccoon' | split: ',' %}
        {% assign demo_prices = '$15.99,$17.99,$12.99,$24.99,$12.99' | split: ',' %}

        {% for i in (1..5) %}
          {% assign index = forloop.index0 %}
          {% assign img_asset = demo_products[index] | default: 'no-image.png' %}
          {% assign prod_name = demo_names[index] | default: 'Featured Gaming Item' %}
          {% assign prod_price = demo_prices[index] | default: '$9.99' %}

          <div class="product-card">
            <div class="product-image-container">
              <img
                src="{{ img_asset | asset_url }}"
                alt="{{ prod_name }}"
                class="product-image"
                width="220"
                height="180"
                loading="lazy"
              >
            </div>

            <div class="product-info">
              <h3 class="product-title">
                <a href="/collections/all">{{ prod_name }}</a>
              </h3>
              <div class="product-price">{{ prod_price }}</div>
            </div>
          </div>
        {% endfor %}
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Featured Products",
  "settings": [
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 4,
      "max": 20,
      "step": 1,
      "default": 8,
      "label": "Number of products to show"
    },
    {
      "type": "url",
      "id": "view_all_link",
      "label": "View All Link"
    }
  ],
  "presets": [
    {
      "name": "Featured Products"
    }
  ]
}
{% endschema %}
