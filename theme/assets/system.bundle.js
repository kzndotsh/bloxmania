!function(){"use strict";const e="system";if(window.BloxMania&&window.BloxMania.bundles&&(window.BloxMania.bundles[e]={version:"1.0.0",loaded:!0,timestamp:Date.now()}),"undefined"==typeof SectionId){class b{static separator="__";static parseId(e){return e.split(b.separator)[0]}static parseSectionName(e){return e.split(b.separator)[1]}static getIdForSection(e,t){return`${e}${b.separator}${t}`}}window.SectionId=b}if("undefined"==typeof HTMLUpdateUtility){class w{static viewTransition(e,t,s=[],i=[]){s?.forEach(e=>e(t));const n=document.createElement("div");w.setInnerHTML(n,t.outerHTML);const o=n.firstChild,a=Date.now();e.querySelectorAll("[id], [form]").forEach(e=>{e.id&&(e.id=`${e.id}-${a}`),e.form&&e.setAttribute("form",`${e.form.getAttribute("id")}-${a}`)}),e.parentNode.insertBefore(o,e),e.style.display="none",i?.forEach(e=>e(o)),setTimeout(()=>e.remove(),500)}static setInnerHTML(e,t){e.innerHTML=t,e.querySelectorAll("script").forEach(e=>{const t=document.createElement("script");Array.from(e.attributes).forEach(e=>{t.setAttribute(e.name,e.value)}),t.appendChild(document.createTextNode(e.innerHTML)),e.parentNode.replaceChild(t,e)})}}window.HTMLUpdateUtility=w}const t={};if("undefined"==typeof trapFocus){function E(e,s=e){const{getFocusableElements:i}=window.BloxManiaConstants||{},n=i?i(e):Array.from(e.querySelectorAll("summary, a[href], button:enabled, [tabindex]:not([tabindex^='-']), [draggable], area, input:not([type=hidden]):enabled, select:enabled, textarea:enabled, object, iframe")),o=n[0],a=n[n.length-1];removeTrapFocus(),t.focusin=s=>{s.target!==e&&s.target!==a&&s.target!==o||document.addEventListener("keydown",t.keydown)},t.focusout=function(){document.removeEventListener("keydown",t.keydown)},t.keydown=function(t){"TAB"===t.code.toUpperCase()&&(t.target!==a||t.shiftKey||(t.preventDefault(),o.focus()),t.target!==e&&t.target!==o||!t.shiftKey||(t.preventDefault(),a.focus()))},document.addEventListener("focusout",t.focusout),document.addEventListener("focusin",t.focusin),s.focus(),"INPUT"===s.tagName&&["search","text","email","url"].includes(s.type)&&s.value&&s.setSelectionRange(0,s.value.length)}window.trapFocus=E}if("undefined"==typeof removeTrapFocus){function S(e=null){document.removeEventListener("focusin",t.focusin),document.removeEventListener("focusout",t.focusout),document.removeEventListener("keydown",t.keydown),e&&e.focus()}window.removeTrapFocus=S}if("undefined"==typeof onKeyUpEscape){function L(e){if("ESCAPE"!==e.code.toUpperCase())return;const t=e.target.closest("details[open]");if(!t)return;const s=t.querySelector("summary"),i=t.closest("details[open] > .modal__content");if(i){const e=i.closest("details[open]").querySelector("summary");e.focus(),e.click()}else s&&(s.focus(),s.click())}window.onKeyUpEscape=L}if("undefined"==typeof pauseAllMedia){function k(){document.querySelectorAll(".js-youtube").forEach(e=>{e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}),document.querySelectorAll(".js-vimeo").forEach(e=>{e.contentWindow.postMessage('{"method":"pause"}',"*")}),document.querySelectorAll("video").forEach(e=>e.pause()),document.querySelectorAll("product-model").forEach(e=>{e.modelViewerUI&&e.modelViewerUI.pause()})}window.pauseAllMedia=k}if("undefined"==typeof fetchConfig){function T(e="json"){return{method:"POST",headers:{"Content-Type":"application/json",Accept:"json"===e?"application/json":"text/html"}}}window.fetchConfig=T}window.DawnUtilities={SectionId:SectionId,HTMLUpdateUtility:HTMLUpdateUtility,trapFocus:trapFocus,removeTrapFocus:removeTrapFocus,onKeyUpEscape:onKeyUpEscape,pauseAllMedia:pauseAllMedia,fetchConfig:fetchConfig,PubSub:class{constructor(){this.events={}}subscribe(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}publish(e,t){this.events[e]&&this.events[e].forEach(e=>e(t))}unsubscribe(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(e=>e!==t))}}};const s="bloxmania-theme-cache-v1",i="bloxmania-runtime-cache-v1",n="bloxmania-images-cache-v1",o=["/","/assets/style-base.css","/assets/core-global.js","/assets/system-theme-editor.js","/assets/core-dom.js","/assets/helper-html-update.js","/assets/helper-section-id.js","/assets/system-performance.js"],a="cache-first",r="network-first",c="stale-while-revalidate";async function l(e,t,s,i={}){const n=await caches.open(t);switch(s){case a:return async function(e,t,s){try{const i=await t.match(e);if(i&&!d(i,s.maxAge))return i;const n=await fetch(e);if(200===n.status){const i=n.clone();await t.put(e,i),s.maxEntries&&await async function(e,t){const s=await e.keys();if(s.length>t){const i=s.slice(0,s.length-t);await Promise.all(i.map(t=>e.delete(t)))}}(t,s.maxEntries)}return n}catch(s){console.error("Cache-first strategy failed:",s);return await t.match(e)||new Response("Network error",{status:503})}}(e,n,i);case r:return async function(e,t,s){try{const s=await fetch(e);if(200===s.status){const i=s.clone();await t.put(e,i)}return s}catch(i){const n=await t.match(e);return n&&!d(n,s.maxAge)?n:new Response("Network and cache failed",{status:503})}}(e,n,i);case c:return async function(e,t,s){const i=await t.match(e),n=fetch(e).then(s=>(200===s.status&&t.put(e,s.clone()),s)).catch(e=>{});if(i&&!d(i,s.maxAge))return i;return n}(e,n,i);default:return fetch(e)}}function d(e,t){if(!t)return!1;const s=e.headers.get("date");if(!s)return!1;const i=new Date(s).getTime();return Date.now()-i>t}self.addEventListener("install",e=>{e.waitUntil(caches.open(s).then(e=>e.addAll(o)).then(()=>self.skipWaiting()).catch(e=>{console.error("Failed to precache assets:",e)}))}),self.addEventListener("activate",e=>{const t=[s,i,n];e.waitUntil(caches.keys().then(e=>e.filter(e=>!t.includes(e))).then(e=>Promise.all(e.map(e=>caches.delete(e)))).then(()=>self.clients.claim()))}),self.addEventListener("fetch",e=>{const t=e.request;(new URL(t.url).origin.includes(self.location.origin)||function(e){return e.url.includes("fonts.googleapis.com")||e.url.includes("fonts.gstatic.com")||e.url.includes("cdn.shopify.com")}(t))&&"GET"===t.method&&(function(e){return e.url.includes("/admin")||e.url.includes("/cart")||e.url.includes("/checkout")||e.url.includes("/account")||e.url.includes("/password")}(t)||(!function(e){return e.headers.get("accept")?.includes("text/html")}(t)?!function(e){return e.url.match(/\.(png|jpg|jpeg|webp|svg|gif|ico)(\?.*)?$/i)}(t)?!function(e){return e.url.match(/\.(js|css|woff|woff2|eot|ttf|otf)(\?.*)?$/i)}(t)?!function(e){return e.url.includes("/cart.js")||e.url.includes("/search.json")||e.url.includes("/products.json")||e.url.includes(".json")}(t)?e.respondWith(async function(e){return l(e,i,c)}(t)):e.respondWith(async function(e){return l(e,i,r,{maxAge:3e5})}(t)):e.respondWith(async function(e){return l(e,s,a)}(t)):e.respondWith(async function(e){return l(e,n,a,{maxAge:2592e6,maxEntries:100})}(t)):e.respondWith(async function(e){return l(e,i,r)}(t))))}),self.addEventListener("sync",e=>{"background-sync"===e.tag&&e.waitUntil(async function(){}())}),self.addEventListener("push",e=>{if(e.data){const t=e.data.json(),s={body:t.body,icon:"/assets/icon-192x192.png",badge:"/assets/badge-72x72.png",tag:t.tag||"default",requireInteraction:t.requireInteraction||!1,actions:t.actions||[]};e.waitUntil(self.registration.showNotification(t.title,s))}}),self.addEventListener("notificationclick",e=>{e.notification.close(),e.action?function(e,t){if("view"===e)clients.openWindow(t?.url||"/")}(e.action,e.notification.data):e.waitUntil(clients.openWindow(e.notification.data?.url||"/"))}),self.addEventListener("message",e=>{if(e.data&&e.data.type)switch(e.data.type){case"SKIP_WAITING":self.skipWaiting();break;case"GET_VERSION":e.ports[0].postMessage({version:s});break;case"CLEAR_CACHE":(async function(){const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))})().then(()=>{e.ports[0].postMessage({success:!0})})}}),self.addEventListener("error",e=>{console.error("Service Worker error:",e.error)}),self.addEventListener("unhandledrejection",e=>{console.error("Service Worker unhandled rejection:",e.reason)});const u=new class{constructor(){this.metrics={},this.observers={},this.thresholds={lcp:2500,fid:100,cls:.1},this.init()}init(){this.setupCoreWebVitals(),this.setupPerformanceObserver(),this.setupResourceTiming(),this.setupUserTiming()}setupCoreWebVitals(){if("PerformanceObserver"in window){try{const e=new PerformanceObserver(e=>{const t=e.getEntries(),s=t[t.length-1];this.metrics.lcp=s.startTime,this.reportMetric("LCP",s.startTime)});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.lcp=e}catch(e){console.warn("LCP observer failed:",e)}try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.metrics.fid=e.processingStart-e.startTime,this.reportMetric("FID",this.metrics.fid)})});e.observe({entryTypes:["first-input"]}),this.observers.fid=e}catch(e){console.warn("FID observer failed:",e)}try{let e=0;const t=new PerformanceObserver(t=>{t.getEntries().forEach(t=>{t.hadRecentInput||(e+=t.value,this.metrics.cls=e,this.reportMetric("CLS",e))})});t.observe({entryTypes:["layout-shift"]}),this.observers.cls=t}catch(e){console.warn("CLS observer failed:",e)}}}setupPerformanceObserver(){if("PerformanceObserver"in window){try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.measureNavigationTiming(e)})});e.observe({entryTypes:["navigation"]}),this.observers.navigation=e}catch(e){console.warn("Navigation observer failed:",e)}try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.measureResourceTiming(e)})});e.observe({entryTypes:["resource"]}),this.observers.resource=e}catch(e){console.warn("Resource observer failed:",e)}}}setupResourceTiming(){["/assets/style-base.css","/assets/core-global.js","/assets/core-init.js"].forEach(e=>{this.measureResourceLoad(e)})}setupUserTiming(){this.mark("theme:init:start"),window.addEventListener("DOMContentLoaded",()=>{this.mark("theme:dom:loaded"),this.measure("theme:init","theme:init:start","theme:dom:loaded")}),window.addEventListener("load",()=>{this.mark("theme:load:complete"),this.measure("theme:load","theme:init:start","theme:load:complete")})}mark(e){"performance"in window&&"mark"in performance&&performance.mark(e)}measure(e,t,s){if("performance"in window&&"measure"in performance)try{const i=performance.measure(e,t,s);this.reportMetric(e,i.duration)}catch(t){console.warn(`Failed to measure ${e}:`,t)}}measureNavigationTiming(e){const t={DNS:e.domainLookupEnd-e.domainLookupStart,TCP:e.connectEnd-e.connectStart,TTFB:e.responseStart-e.requestStart,DOMContentLoaded:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,Load:e.loadEventEnd-e.loadEventStart};Object.entries(t).forEach(([e,t])=>{this.reportMetric(`Navigation:${e}`,t)})}measureResourceTiming(e){if([".css",".js",".png",".jpg",".webp",".svg"].some(t=>e.name.includes(t))){const t={DNS:e.domainLookupEnd-e.domainLookupStart,TCP:e.connectEnd-e.connectStart,TTFB:e.responseStart-e.requestStart,Download:e.responseEnd-e.responseStart,Total:e.responseEnd-e.startTime};Object.entries(t).forEach(([t,s])=>{this.reportMetric(`Resource:${t}`,s,e.name)})}}measureResourceLoad(e){const t=document.createElement("link");t.rel="preload",t.as=this.getResourceType(e),t.href=e,t.addEventListener("load",()=>{this.reportMetric("Resource:Preload",performance.now(),e)}),document.head.appendChild(t)}getResourceType(e){return e.endsWith(".css")?"style":e.endsWith(".js")?"script":e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".webp")?"image":"fetch"}reportMetric(e,t,s=""){this.metrics[e]=t;const i=this.thresholds[e.toLowerCase()];if(i){const s=t<=i?"good":t<=1.5*i?"needs-improvement":"poor";this.metrics[`${e}_status`]=s}this.sendToAnalytics(e,t,s),"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname||console.log(`Performance: ${e} = ${t}ms`,s)}sendToAnalytics(e,t,s){"undefined"!=typeof gtag&&gtag("event","performance_metric",{metric_name:e,metric_value:t,metric_context:s,page_location:window.location.href}),window.BloxManiaConfig?.analytics?.endpoint&&fetch(window.BloxManiaConfig.analytics.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metric:e,value:t,context:s,timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent})}).catch(e=>console.warn("Analytics send failed:",e))}getMetrics(){return{...this.metrics}}getCoreWebVitals(){return{lcp:this.metrics.lcp,fid:this.metrics.fid,cls:this.metrics.cls,lcp_status:this.metrics.lcp_status,fid_status:this.metrics.fid_status,cls_status:this.metrics.cls_status}}isPerformanceGood(){const e=this.getCoreWebVitals();return!(e.lcp_status&&"good"!==e.lcp_status||e.fid_status&&"good"!==e.fid_status||e.cls_status&&"good"!==e.cls_status)}generateReport(){return{timestamp:Date.now(),url:window.location.href,metrics:this.getMetrics(),coreWebVitals:this.getCoreWebVitals(),performanceGood:this.isPerformanceGood(),userAgent:navigator.userAgent}}cleanup(){Object.values(this.observers).forEach(e=>{e&&"function"==typeof e.disconnect&&e.disconnect()})}};window.PerformanceMonitor=u;const h=new class{constructor(){this.isEditor=!1,this.sections=new Map,this.blocks=new Map,this.init()}init(){this.detectEditor(),this.setupEventListeners(),this.initializeSections()}detectEditor(){this.isEditor="design"===window.Shopify?.designMode||document.body.classList.contains("shopify-design-mode")||window.location.search.includes("preview_theme_id"),this.isEditor&&(document.documentElement.classList.add("theme-editor"),console.log("BloxMania theme editor mode detected"))}setupEventListeners(){this.isEditor&&(document.addEventListener("shopify:section:load",e=>{this.handleSectionLoad(e)}),document.addEventListener("shopify:section:unload",e=>{this.handleSectionUnload(e)}),document.addEventListener("shopify:section:select",e=>{this.handleSectionSelect(e)}),document.addEventListener("shopify:section:deselect",e=>{this.handleSectionDeselect(e)}),document.addEventListener("shopify:block:select",e=>{this.handleBlockSelect(e)}),document.addEventListener("shopify:block:deselect",e=>{this.handleBlockDeselect(e)}),document.addEventListener("shopify:theme:load",e=>{this.handleThemeLoad(e)}),window.Shopify?.on&&window.Shopify.on("shopify:section:reorder",e=>{this.handleSectionReorder(e)}))}initializeSections(){if(!this.isEditor)return;document.querySelectorAll("[data-section-id]").forEach(e=>{this.registerSection(e)})}registerSection(e){const t=e.dataset.sectionId;if(!t)return;const s={element:e,id:t,type:e.dataset.sectionType,blocks:new Map,initialized:!1};this.sections.set(t,s),this.initializeSectionBlocks(s),console.log(`Section registered: ${t} (${s.type})`)}initializeSectionBlocks(e){e.element.querySelectorAll("[data-block-id]").forEach(t=>{const s=t.dataset.blockId;if(!s)return;const i={element:t,id:s,type:t.dataset.blockType,sectionId:e.id};e.blocks.set(s,i),this.blocks.set(s,i)})}handleSectionLoad(e){const t=e.detail.sectionId,s=e.target;console.log(`Section loaded: ${t}`),this.registerSection(s),this.initializeSectionFunctionality(t),s.dispatchEvent(new CustomEvent("section:loaded",{detail:{sectionId:t,section:this.sections.get(t)}}))}handleSectionUnload(e){const t=e.detail.sectionId;console.log(`Section unloaded: ${t}`);const s=this.sections.get(t);s&&(s.blocks.forEach((e,t)=>{this.blocks.delete(t)}),this.sections.delete(t))}handleSectionSelect(e){const t=e.detail.sectionId,s=this.sections.get(t);s&&(s.element.classList.add("section-selected"),console.log(`Section selected: ${t}`),s.element.dispatchEvent(new CustomEvent("section:selected",{detail:{sectionId:t,section:s}})))}handleSectionDeselect(e){const t=e.detail.sectionId,s=this.sections.get(t);s&&(s.element.classList.remove("section-selected"),console.log(`Section deselected: ${t}`),s.element.dispatchEvent(new CustomEvent("section:deselected",{detail:{sectionId:t,section:s}})))}handleBlockSelect(e){const t=e.detail.blockId,s=this.blocks.get(t);s&&(s.element.classList.add("block-selected"),console.log(`Block selected: ${t}`),s.element.dispatchEvent(new CustomEvent("block:selected",{detail:{blockId:t,block:s}})))}handleBlockDeselect(e){const t=e.detail.blockId,s=this.blocks.get(t);s&&(s.element.classList.remove("block-selected"),console.log(`Block deselected: ${t}`),s.element.dispatchEvent(new CustomEvent("block:deselected",{detail:{blockId:t,block:s}})))}handleThemeLoad(e){console.log("Theme loaded in editor"),this.initializeSections(),document.dispatchEvent(new CustomEvent("theme:editor:loaded",{detail:{sections:this.sections,blocks:this.blocks}}))}handleSectionReorder(e){console.log("Sections reordered:",e.detail),document.dispatchEvent(new CustomEvent("sections:reordered",{detail:e.detail}))}initializeSectionFunctionality(e){const t=this.sections.get(e);if(t&&!t.initialized){switch(t.type){case"hero":this.initializeHeroSection(t);break;case"featured-products":this.initializeFeaturedProductsSection(t);break;case"main-product":this.initializeProductSection(t);break;case"customer-reviews":this.initializeReviewsSection(t);break;case"faq":this.initializeFaqSection(t);break;default:this.initializeGenericSection(t)}t.initialized=!0}}initializeHeroSection(e){const t=e.element.querySelector(".hero");if(t){t.classList.add("editor-hero");t.querySelectorAll("[data-background-image]").forEach(e=>{e.classList.add("editor-editable")})}}initializeFeaturedProductsSection(e){const t=e.element.querySelector(".product-grid");t&&t.classList.add("editor-product-grid")}initializeProductSection(e){const t=e.element.querySelector("product-form");t&&t.classList.add("editor-product-form")}initializeReviewsSection(e){const t=e.element.querySelector(".reviews-container");t&&t.classList.add("editor-reviews")}initializeFaqSection(e){e.element.querySelectorAll(".faq-item").forEach(e=>{e.classList.add("editor-faq-item")})}initializeGenericSection(e){e.element.classList.add("editor-section")}getSection(e){return this.sections.get(e)}getBlock(e){return this.blocks.get(e)}getAllSections(){return Array.from(this.sections.values())}getAllBlocks(){return Array.from(this.blocks.values())}isInEditor(){return this.isEditor}refreshSection(e){const t=this.sections.get(e);t&&t.element.dispatchEvent(new CustomEvent("section:refresh",{detail:{sectionId:e,section:t}}))}updateSectionSettings(e,t){const s=this.sections.get(e);s&&(Object.entries(t).forEach(([e,t])=>{s.element.style.setProperty(`--${e}`,t)}),s.element.dispatchEvent(new CustomEvent("section:settings:updated",{detail:{sectionId:e,section:s,settings:t}})))}cleanup(){this.sections.clear(),this.blocks.clear()}};if(window.ThemeEditor=h,h.isInEditor()){const C=document.createElement("style");C.textContent="\n    .theme-editor .section-selected {\n      outline: 2px solid #ffd800;\n      outline-offset: 2px;\n    }\n    \n    .theme-editor .block-selected {\n      outline: 2px solid #4791f0;\n      outline-offset: 1px;\n    }\n    \n    .theme-editor .editor-editable {\n      cursor: pointer;\n    }\n    \n    .theme-editor .editor-editable:hover {\n      opacity: 0.8;\n    }\n    \n    .theme-editor .editor-section {\n      position: relative;\n    }\n    \n    .theme-editor .editor-section::before {\n      content: attr(data-section-type);\n      position: absolute;\n      top: 0;\n      left: 0;\n      background: rgba(0, 0, 0, 0.7);\n      color: white;\n      padding: 0.25rem 0.5rem;\n      font-size: 0.75rem;\n      z-index: 1000;\n      border-radius: 0 0 4px 0;\n    }\n  ",document.head.appendChild(C)}function m(e,t){customElements.get(e)?console.warn(`Custom element '${e}' is already defined, skipping registration.`):customElements.define(e,t)}class f extends HTMLElement{constructor(){super(),this.initialized=!1}connectedCallback(){this.initialized||(this.init(),this.initialized=!0)}disconnectedCallback(){this.cleanup()}init(){}cleanup(){}}class p extends f{constructor(){super(),this.modal=null,this.closeButton=null,this.focusableElements=[],this.firstFocusableElement=null,this.lastFocusableElement=null}init(){this.modal=this.querySelector(".modal__content"),this.closeButton=this.querySelector(".modal__close-button"),this.bindEvents(),this.setupFocusTrap()}bindEvents(){this.closeButton?.addEventListener("click",()=>this.hide()),this.addEventListener("keydown",e=>{"Escape"===e.key&&this.hide()}),this.addEventListener("click",e=>{e.target===this&&this.hide()})}setupFocusTrap(){this.focusableElements=Array.from(this.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')),this.focusableElements.length>0&&(this.firstFocusableElement=this.focusableElements[0],this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1])}show(){this.setAttribute("open",""),document.body.classList.add("modal-open"),this.firstFocusableElement?.focus(),this.addEventListener("keydown",this.handleTabKey.bind(this))}hide(){this.removeAttribute("open"),document.body.classList.remove("modal-open"),this.removeEventListener("keydown",this.handleTabKey.bind(this))}handleTabKey(e){"Tab"===e.key&&(e.shiftKey?document.activeElement===this.firstFocusableElement&&(e.preventDefault(),this.lastFocusableElement?.focus()):document.activeElement===this.lastFocusableElement&&(e.preventDefault(),this.firstFocusableElement?.focus()))}cleanup(){this.removeEventListener("keydown",this.handleTabKey.bind(this))}}class v extends p{constructor(){super(),this.searchInput=null,this.searchResults=null,this.searchForm=null}init(){super.init(),this.searchInput=this.querySelector(".search-modal__input"),this.searchResults=this.querySelector(".search-modal__results"),this.searchForm=this.querySelector(".search-modal__form"),this.setupSearch()}setupSearch(){this.searchForm?.addEventListener("submit",e=>{e.preventDefault(),this.performSearch()}),this.searchInput?.addEventListener("input",this.debounce(()=>{this.performSearch()},300))}performSearch(){const e=this.searchInput?.value.trim();!e||e.length<2?this.clearResults():this.fetchSearchResults(e)}async fetchSearchResults(e){try{const t=await fetch(`/search/suggest.json?q=${encodeURIComponent(e)}`),s=await t.json();this.displayResults(s.resources?.results||[])}catch(e){console.error("Search error:",e)}}displayResults(e){if(!this.searchResults)return;if(0===e.length)return void(this.searchResults.innerHTML='<p class="search-modal__no-results">No results found</p>');const t=e.map(e=>`\n      <a href="${e.url}" class="search-modal__result-item">\n        <div class="search-modal__result-image">\n          ${e.featured_image?`<img src="${e.featured_image}" alt="${e.title}">`:""}\n        </div>\n        <div class="search-modal__result-content">\n          <h3 class="search-modal__result-title">${e.title}</h3>\n          <p class="search-modal__result-price">${e.price||""}</p>\n        </div>\n      </a>\n    `).join("");this.searchResults.innerHTML=t}clearResults(){this.searchResults&&(this.searchResults.innerHTML="")}debounce(e,t){let s;return function(...i){clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),e(...i)},t)}}}class y extends f{constructor(){super(),this.notification=null,this.message=null,this.closeButton=null,this.timeout=null}init(){this.notification=this.querySelector(".cart-notification"),this.message=this.querySelector(".cart-notification__message"),this.closeButton=this.querySelector(".cart-notification__close"),this.bindEvents()}bindEvents(){this.closeButton?.addEventListener("click",()=>this.hide()),this.addEventListener("animationend",()=>{this.classList.contains("animate-in")&&(this.timeout=setTimeout(()=>this.hide(),5e3))})}show(e,t="success"){this.message&&(this.message.textContent=e),this.classList.remove("animate-out"),this.classList.add("animate-in"),this.setAttribute("aria-hidden","false"),this.announceToScreenReader(e)}hide(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.classList.remove("animate-in"),this.classList.add("animate-out"),this.setAttribute("aria-hidden","true")}announceToScreenReader(e){const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.classList.add("sr-only"),t.textContent=e,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},1e3)}cleanup(){this.timeout&&clearTimeout(this.timeout)}}class g extends f{constructor(){super(),this.form=null,this.submitButton=null,this.variantSelects=null,this.quantityInput=null,this.productId=null}init(){this.form=this.querySelector("form"),this.submitButton=this.querySelector('[type="submit"]'),this.variantSelects=this.querySelectorAll(".product-form__input"),this.quantityInput=this.querySelector(".quantity__input"),this.productId=this.dataset.productId,this.bindEvents()}bindEvents(){this.form?.addEventListener("submit",e=>this.handleSubmit(e)),this.variantSelects.forEach(e=>{e.addEventListener("change",()=>this.handleVariantChange())}),this.quantityInput?.addEventListener("change",()=>this.handleQuantityChange())}async handleSubmit(e){if(e.preventDefault(),this.validateForm()){this.setLoadingState(!0);try{const e=new FormData(this.form),t=await fetch("/cart/add.js",{method:"POST",body:e});if(!t.ok)throw new Error("Add to cart failed");const s=await t.json();this.handleSuccess(s)}catch(e){this.handleError(e)}finally{this.setLoadingState(!1)}}}validateForm(){const e=this.form.querySelectorAll("[required]");let t=!0;return e.forEach(e=>{e.value.trim()?e.classList.remove("error"):(t=!1,e.classList.add("error"))}),t}setLoadingState(e){this.submitButton&&(this.submitButton.disabled=e,this.submitButton.textContent=e?"Adding...":"Add to Cart")}handleSuccess(e){document.dispatchEvent(new CustomEvent("cart:updated",{detail:{cart:e}}));const t=document.querySelector("cart-notification");t&&t.show("Item added to cart successfully")}handleError(e){console.error("Add to cart error:",e);const t=document.querySelector("cart-notification");t&&t.show("Failed to add item to cart","error")}handleVariantChange(){const e=Array.from(this.variantSelects).map(e=>e.value);this.dispatchEvent(new CustomEvent("variant:change",{detail:{selectedOptions:e}}))}handleQuantityChange(){const e=this.quantityInput?.value;e&&this.dispatchEvent(new CustomEvent("quantity:change",{detail:{quantity:parseInt(e)}}))}}m("modal-dialog",p),m("search-modal",v),m("cart-notification",y),m("product-form",g),window.BloxManiaComponents={ModalDialog:p,SearchModal:v,CartNotification:y,ProductForm:g},window.BloxMania&&window.BloxMania.bundles&&window.BloxMania.bundles[e]&&(window.BloxMania.bundles[e].initialized=!0),console.log(`✅ ${e} bundle loaded`)}();