!function(){"use strict";const e="features";window.BloxMania&&window.BloxMania.bundles&&(window.BloxMania.bundles[e]={version:"1.0.0",loaded:!0,timestamp:Date.now()});class t extends HTMLElement{constructor(){super(),this.lineItemStatusElement=document.getElementById("shopping-cart-line-item-status"),this.currentItemCount=Array.from(this.querySelectorAll('[name="updates[]"]')).reduce((e,t)=>e+parseInt(t.value),0),this.originalQuantities=new Map,this.updateTimeout=null,this.isUpdating=!1,this.querySelectorAll('[name="updates[]"]').forEach(e=>{this.originalQuantities.set(e.dataset.cartItemKey,parseInt(e.value))}),console.log("CartItems initialized"),console.log("Quantity inputs found:",this.querySelectorAll('[name="updates[]"]').length),console.log("Error elements found:",this.querySelectorAll(".cart-item__error").length),this.initializeErrorElements(),this.addEventListener("change",this.onChange.bind(this)),this.addEventListener("quantity:changed",this.onQuantityChanged.bind(this))}onChange(e){const t=e.target,s=(t.dataset.cartItemKey,parseInt(t.value));s<0?t.value=0:(this.updateTimeout&&clearTimeout(this.updateTimeout),0===s?this.autoUpdateCart():this.updateTimeout=setTimeout(()=>{this.autoUpdateCart()},500))}onQuantityChanged(e){const{value:t,input:s}=e.detail;this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(()=>{this.autoUpdateCart()},100)}async autoUpdateCart(){if(this.isUpdating)return;const e=new FormData;let t=!1;const s=[];if(this.querySelectorAll('[name="updates[]"]').forEach(n=>{const a=n.dataset.cartItemKey,r=parseInt(n.value);r!==(this.originalQuantities.get(a)||0)&&(e.append(`updates[${a}]`,r),t=!0,s.push({key:a,quantity:r}))}),t){this.isUpdating=!0,s.forEach(({key:e})=>{const t=this.querySelector(`[data-cart-item-key="${e}"]`).closest(".cart-item");t&&t.classList.add("updating")});try{const t=await fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:new URLSearchParams(e)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();this.updateCartUI(s),this.querySelectorAll('[name="updates[]"]').forEach(e=>{const t=e.dataset.cartItemKey;this.originalQuantities.set(t,parseInt(e.value))}),this.showAutoUpdateSuccess()}catch(e){console.error("Error updating cart:",e),this.showError(null,"There was an error updating your cart. Please try again."),this.revertQuantities()}finally{this.isUpdating=!1,s.forEach(({key:e})=>{const t=this.querySelector(`[data-cart-item-key="${e}"]`).closest(".cart-item");t&&t.classList.remove("updating")})}}}async updateCart(){await this.autoUpdateCart()}updateCartUI(e){this.clearAllErrors();document.querySelectorAll("[data-cart-count]").forEach(t=>{t.textContent=e.item_count});document.querySelectorAll("[data-cart-total]").forEach(t=>{t.textContent=this.formatMoney(e.total_price)}),e.items&&e.items.forEach(e=>{const t=this.querySelector(`[data-cart-item-key="${e.key}"]`).closest(".cart-item");if(t){const s=t.querySelector(".cart-item__final-price");s&&(s.textContent=this.formatMoney(e.final_line_price));const n=t.querySelector('[name="updates[]"]');n&&(n.value=e.quantity)}});const t=document.querySelector(".totals__total-value");t&&(t.textContent=this.formatMoney(e.total_price));const s=document.querySelector(".cart__count");s&&(1===e.item_count?s.textContent="1 item":s.textContent=`${e.item_count} items`);const n=document.getElementById("checkout");if(n&&(n.disabled=0===e.item_count),0===e.item_count)this.showEmptyCart();else{const e=document.querySelector(".cart-page");e&&e.classList.remove("is-empty");const t=document.querySelector(".cart__form"),s=document.querySelector(".cart__warnings"),n=document.querySelector(".cart__header");t&&(t.style.display="block"),s&&(s.style.display="none"),n&&(n.style.display="block")}this.updateProductPageQuantityDisplays(e)}updateProductPageQuantityDisplays(e){document.querySelectorAll(".quantity__rules-cart").forEach(t=>{const s=t.closest(".quantity-input-wrapper")?.querySelector("input")?.dataset.cartQuantity;if(s){const n=e.items.find(e=>e.variant_id.toString()===s),a=n?n.quantity:0;a>0?(t.textContent=`(${a} in cart)`,t.style.display="inline"):t.style.display="none"}})}initializeErrorElements(){document.querySelectorAll(".cart-item__error").forEach(e=>{const t=e.querySelector(".cart-item__error-text");t&&(t.textContent=""),e.classList.remove("show-error")});const e=document.getElementById("cart-errors");if(e){const t=e.querySelector(".cart__error-text");t&&(t.textContent=""),e.classList.remove("show-error")}}clearAllErrors(){document.querySelectorAll(".cart-item__error").forEach(e=>{const t=e.querySelector(".cart-item__error-text");t&&(t.textContent=""),e.classList.remove("show-error")});const e=document.getElementById("cart-errors");if(e){const t=e.querySelector(".cart__error-text");t&&(t.textContent=""),e.classList.remove("show-error")}}showAutoUpdateSuccess(){document.querySelectorAll(".cart-item.updating").forEach(e=>{e.classList.add("updated"),setTimeout(()=>{e.classList.remove("updated")},1e3)})}showSuccess(e){const t=document.createElement("div");t.className="cart__success",t.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: #10b981;\n      color: white;\n      padding: 12px 20px;\n      border-radius: 6px;\n      z-index: 1000;\n      font-weight: 500;\n    ",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},3e3)}revertQuantities(){this.querySelectorAll('[name="updates[]"]').forEach(e=>{const t=e.dataset.cartItemKey,s=this.originalQuantities.get(t)||0;e.value=s})}showError(e,t){const s=e?e.querySelector(".cart-item__error"):document.getElementById("cart-errors");if(s){const e=s.querySelector(".cart-item__error-text")||s;e.textContent=t,s.classList.add("show-error"),setTimeout(()=>{e.textContent="",s.classList.remove("show-error")},5e3)}}showEmptyCart(){console.log("Showing empty cart state");const e=document.querySelector(".cart-page");e&&e.classList.add("is-empty");const t=document.querySelector(".cart__form");t&&(t.style.display="none");const s=document.querySelector(".cart__warnings");s&&(s.style.display="block");const n=document.querySelector(".cart__header");n&&(n.style.display="none")}formatMoney(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e/100)}}class s extends HTMLElement{constructor(){super(),this.addEventListener("click",this.onClick.bind(this))}onClick(e){e.preventDefault();const t=this.dataset.cartItemKey,s=this.closest(".cart-item");console.log("Remove button clicked for item:",t),this.removeItem(t,s)}async removeItem(e,t){console.log("Removing item with key:",e),t&&(t.style.opacity="0.5",t.style.pointerEvents="none");const s=JSON.stringify({id:e,quantity:0,sections:["main-cart","cart-icon-bubble"]});try{const e=await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:s});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();console.log("Cart updated successfully:",n),t&&(t.remove(),console.log("Cart item removed from UI"));document.querySelectorAll("[data-cart-count]").forEach(e=>{e.textContent=n.item_count});const a=document.querySelector(".cart__count");a&&(1===n.item_count?a.textContent="1 item":a.textContent=`${n.item_count} items`);const r=document.querySelector(".totals__total-value");r&&(r.textContent=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n.total_price/100)),0===n.item_count&&this.showEmptyCart()}catch(e){console.error("Error removing item from cart:",e)}}showEmptyCart(){console.log("Showing empty cart state from remove button");const e=document.querySelector(".cart-page");e?(e.classList.add("is-empty"),console.log("Added is-empty class to cart page"),console.log("Cart page classes:",e.className)):console.log("Cart page element not found");const t=document.querySelector(".cart__form");t?(t.style.display="none",console.log("Hidden cart form")):console.log("Cart form element not found");let s=document.querySelector(".cart__warnings");if(s)s.style.display="block",console.log("Showed existing cart warnings");else{if(console.log("Creating empty cart message dynamically"),s=document.createElement("div"),s.className="cart__warnings",s.innerHTML='\n        <h1 class="cart__empty-text">Your cart is empty</h1>\n        <a href="/collections/all" class="button">\n          Continue shopping\n        </a>\n      ',t)t.parentNode.insertBefore(s,t.nextSibling);else{const e=document.querySelector(".page-width");e&&e.appendChild(s)}console.log("Created and inserted cart warnings")}const n=document.querySelector(".cart__header");n?(n.style.display="none",console.log("Hidden cart header")):console.log("Cart header element not found")}}class n extends HTMLElement{constructor(){super(),this.addEventListener("change",this.onChange.bind(this))}onChange(e){const t=e.target.value;this.updateCartNote(t)}async updateCartNote(e){try{const t=await fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({note:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`)}catch(e){console.error("Error updating cart note:",e)}}}customElements.get("cart-items")||customElements.define("cart-items",t),customElements.get("cart-remove-button")||customElements.define("cart-remove-button",s),customElements.get("cart-note")||customElements.define("cart-note",n);const a={formatPrice:(e,t="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e/100),getVariantById:(e,t)=>e.variants.find(e=>e.id==t),getFirstAvailableVariant:e=>e.variants.find(e=>e.available)||e.variants[0],updatePriceDisplay(e,t){if(!e||!t)return;const s=this.formatPrice(t.price),n=t.compare_at_price?this.formatPrice(t.compare_at_price):null;n&&t.compare_at_price>t.price?e.innerHTML=`\n        <span class="price__sale">${s}</span>\n        <span class="price__regular">${n}</span>\n      `:e.innerHTML=`<span class="price__regular">${s}</span>`},updateAvailabilityDisplay(e,t){if(e&&t)if(t.available){const s=t.inventory_quantity;e.innerHTML=s<=10&&s>0?`\n          <span class="inventory-status inventory-status--low-stock">\n            Only ${s} left in stock\n          </span>\n        `:s>10?'\n          <span class="inventory-status inventory-status--in-stock">\n            In stock\n          </span>\n        ':'\n          <span class="inventory-status inventory-status--out-of-stock">\n            Out of stock\n          </span>\n        '}else e.innerHTML='\n        <span class="inventory-status inventory-status--out-of-stock">\n          Out of stock\n        </span>\n      '},updateVariantImage(e){if(!e||!e.featured_image)return;const t=document.querySelector(".product-media-gallery");if(!t)return;const s=t.querySelector(".main-media img");s&&(s.src=e.featured_image.src,s.alt=e.featured_image.alt||e.title);t.querySelectorAll(".thumbnail-btn img").forEach((t,s)=>{0===s&&(t.src=e.featured_image.src,t.alt=e.featured_image.alt||e.title)})},validateQuantity(e,t=1,s=999){const n=parseInt(e);return isNaN(n)||n<t?t:n>s?s:n},announceToScreenReader(e,t="polite"){const s=document.createElement("div");s.setAttribute("aria-live",t),s.setAttribute("aria-atomic","true"),s.classList.add("sr-only"),s.textContent=e,document.body.appendChild(s),setTimeout(()=>{document.body.contains(s)&&document.body.removeChild(s)},1e3)}};HTMLElement;class r extends HTMLElement{constructor(){super(),this.selects=[],this.radios=[],this.currentVariant=null}connectedCallback(){this.selects=this.querySelectorAll('select[name*="id"]'),this.radios=this.querySelectorAll('input[type="radio"][name*="id"]'),this.setupEventListeners(),this.initializeVariant()}setupEventListeners(){this.selects.forEach(e=>{e.addEventListener("change",this.handleChange.bind(this))}),this.radios.forEach(e=>{e.addEventListener("change",this.handleChange.bind(this))})}handleChange(){const e=this.getSelectedVariantId();e&&this.updateVariant(e)}getSelectedVariantId(){for(const e of this.selects)if(e.value)return e.value;for(const e of this.radios)if(e.checked)return e.value;return null}async updateVariant(e){try{const t=document.querySelector("#product-json");if(t){const s=JSON.parse(t.textContent),n=a.getVariantById(s,e);n&&(this.currentVariant=n,this.updateUI(n),this.dispatchEvent(new CustomEvent("variant:changed",{bubbles:!0,detail:{variant:n}})))}}catch(e){console.error("Error updating variant:",e)}}updateUI(e){const t=document.querySelector(".product-price");t&&a.updatePriceDisplay(t,e);const s=document.querySelector(".product-inventory");s&&a.updateAvailabilityDisplay(s,e),a.updateVariantImage(e);const n=this.closest("form");if(n){const t=n.querySelector('input[name="id"]');t&&(t.value=e.id)}}initializeVariant(){const e=this.getSelectedVariantId();e&&this.updateVariant(e)}}if(customElements.get("variant-selector")||customElements.define("variant-selector",r),window.ProductUtils=a,"undefined"==typeof PredictiveSearch){class e extends HTMLElement{constructor(){super(),this.searchInput=null,this.searchResults=null,this.searchForm=null,this.cache=new Map,this.currentRequest=null,this.selectedIndex=-1,this.isOpen=!1}connectedCallback(){this.searchInput=this.querySelector(".predictive-search__input"),this.searchResults=this.querySelector(".predictive-search__results"),this.searchForm=this.querySelector(".predictive-search__form"),this.setupSearch(),this.setupKeyboardNavigation()}setupSearch(){this.searchForm?.addEventListener("submit",e=>{e.preventDefault(),this.performSearch()}),this.searchInput?.addEventListener("input",this.debounce(()=>{this.performSearch()},300)),document.addEventListener("click",e=>{this.contains(e.target)||this.closeResults()})}setupKeyboardNavigation(){this.searchInput?.addEventListener("keydown",e=>{switch(e.key){case"ArrowDown":e.preventDefault(),this.selectNext();break;case"ArrowUp":e.preventDefault(),this.selectPrevious();break;case"Enter":this.selectedIndex>=0&&(e.preventDefault(),this.selectResult(this.selectedIndex));break;case"Escape":this.closeResults()}})}async performSearch(){const e=this.searchInput?.value.trim();if(!e||e.length<2)this.closeResults();else if(this.cache.has(e))this.displayResults(this.cache.get(e));else{this.currentRequest&&this.currentRequest.abort();try{this.currentRequest=new AbortController;const t=await fetch(`/search/suggest.json?q=${encodeURIComponent(e)}`,{signal:this.currentRequest.signal}),s=await t.json(),n=s.resources?.results||[];this.cache.set(e,n),this.displayResults(n)}catch(e){"AbortError"!==e.name&&console.error("Search error:",e)}}}displayResults(e){if(!this.searchResults)return;if(0===e.length)return this.searchResults.innerHTML='<p class="predictive-search__no-results">No results found</p>',void this.openResults();const t=e.map((e,t)=>`\n        <a href="${e.url}" class="predictive-search__result-item" data-index="${t}">\n          <div class="predictive-search__result-image">\n            ${e.featured_image?`<img src="${e.featured_image}" alt="${e.title}">`:""}\n          </div>\n          <div class="predictive-search__result-content">\n            <h3 class="predictive-search__result-title">${e.title}</h3>\n            <p class="predictive-search__result-price">${e.price||""}</p>\n          </div>\n        </a>\n      `).join("");this.searchResults.innerHTML=t,this.openResults(),this.selectedIndex=-1}openResults(){this.isOpen=!0,this.searchResults?.classList.add("predictive-search__results--open")}closeResults(){this.isOpen=!1,this.selectedIndex=-1,this.searchResults?.classList.remove("predictive-search__results--open")}selectNext(){const e=this.searchResults?.querySelectorAll(".predictive-search__result-item");e&&0!==e.length&&(this.selectedIndex=Math.min(this.selectedIndex+1,e.length-1),this.updateSelection(e))}selectPrevious(){const e=this.searchResults?.querySelectorAll(".predictive-search__result-item");e&&0!==e.length&&(this.selectedIndex=Math.max(this.selectedIndex-1,-1),this.updateSelection(e))}updateSelection(e){e.forEach((e,t)=>{e.classList.toggle("predictive-search__result-item--selected",t===this.selectedIndex)}),this.selectedIndex>=0&&e[this.selectedIndex]?.scrollIntoView({block:"nearest"})}selectResult(e){const t=this.searchResults?.querySelectorAll(".predictive-search__result-item");t&&t[e]&&(window.location.href=t[e].href)}debounce(e,t){let s;return function(...n){clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),e.apply(this,n)},t)}}}customElements.get("predictive-search")||customElements.define("predictive-search",e),window.PredictiveSearch=e}class i{constructor(){this.init()}init(){this.bindEvents(),this.loadSavedPreferences()}bindEvents(){const e=document.getElementById("sort-by");e&&e.addEventListener("change",this.handleSortChange.bind(this));document.querySelectorAll(".view-btn").forEach(e=>{e.addEventListener("click",this.handleViewChange.bind(this))});const t=document.querySelector(".filters-toggle");t&&t.addEventListener("click",this.toggleMobileFilters.bind(this))}handleSortChange(e){const t=e.target.value,s=new URL(window.location);"manual"===t?s.searchParams.delete("sort_by"):s.searchParams.set("sort_by",t),s.searchParams.delete("page"),window.location.href=s.toString()}handleViewChange(e){const t=e.currentTarget.classList.contains("view-btn--list")?"list":"grid";this.setView(t)}setView(e){const t=document.getElementById("products-grid"),s=document.querySelectorAll(".view-btn"),n=document.querySelectorAll(".grid-card"),a=document.querySelectorAll(".list-card");t&&("list"===e?(t.classList.add("list-view"),t.classList.remove("grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4"),n.forEach(e=>e.classList.add("hidden")),a.forEach(e=>e.classList.remove("hidden"))):(t.classList.remove("list-view"),t.classList.add("grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4"),n.forEach(e=>e.classList.remove("hidden")),a.forEach(e=>e.classList.add("hidden"))),s.forEach(t=>{t.classList.remove("active"),t.classList.contains(`view-btn--${e}`)&&t.classList.add("active")}),this.saveViewPreference(e))}toggleMobileFilters(){}saveViewPreference(e){try{localStorage.setItem("collection-view",e)}catch(e){console.warn("Could not save view preference:",e)}}loadSavedPreferences(){try{const e=localStorage.getItem("collection-view");!e||"list"!==e&&"grid"!==e||this.setView(e)}catch(e){console.warn("Could not load saved preferences:",e)}}updateUrlParameter(e,t){const s=new URL(window.location);return t?s.searchParams.set(e,t):s.searchParams.delete(e),s.toString()}async loadProducts(e={}){try{const t=new URL(window.location);Object.keys(e).forEach(s=>{e[s]?t.searchParams.set(s,e[s]):t.searchParams.delete(s)}),t.searchParams.set("section_id","collection-template");const s=await fetch(t.toString(),{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const n=await s.text(),a=(new DOMParser).parseFromString(n,"text/html"),r=a.getElementById("products-grid"),i=document.getElementById("products-grid");if(r&&i){i.innerHTML=r.innerHTML;const e=a.querySelector(".pagination-wrapper"),t=document.querySelector(".pagination-wrapper");e&&t?t.innerHTML=e.innerHTML:t&&!e&&t.remove()}window.history.pushState({},"",t.toString().replace("&section_id=collection-template",""))}catch(t){console.error("Error loading products:",t),window.location.href=this.updateUrlParameter("sort_by",e.sort_by)}}}window.setView=function(e){window.collectionManager&&window.collectionManager.setView(e)},window.toggleFilters=function(){window.collectionManager&&window.collectionManager.toggleMobileFilters()},document.addEventListener("DOMContentLoaded",function(){window.collectionManager=new i}),window.addEventListener("popstate",function(e){window.location.reload()});class o extends HTMLElement{constructor(){super(),this.setupEventListeners()}setupEventListeners(){this.querySelectorAll('[data-address=""]').forEach(e=>{e.addEventListener("click",this.openAddressModal.bind(this,"AddAddress"))});this.querySelectorAll('[data-address]:not([data-address=""])').forEach(e=>{e.addEventListener("click",e=>{const t=JSON.parse(e.target.getAttribute("data-address"));this.openAddressModal("EditAddress",t)})});this.querySelectorAll("[data-target][data-confirm-message]").forEach(e=>{e.addEventListener("click",this.handleDeleteAddress.bind(this))});this.querySelectorAll(".address-form-modal__close, .address-form__cancel").forEach(e=>{e.addEventListener("click",this.closeAddressModal.bind(this))}),this.setupCountryProvinceSelectors()}openAddressModal(e,t=null){const s=document.getElementById(e);if(!s)return;t&&"EditAddress"===e&&this.populateEditForm(t),s.removeAttribute("hidden"),s.setAttribute("aria-hidden","false");const n=s.querySelector("input");n&&n.focus(),document.body.style.overflow="hidden"}closeAddressModal(){document.querySelectorAll(".address-form-modal").forEach(e=>{e.setAttribute("hidden",""),e.setAttribute("aria-hidden","true")}),document.body.style.overflow=""}populateEditForm(e){const t=document.querySelector("#EditAddress form");if(!t)return;t.action=`/account/addresses/${e.id}`;const s={AddressFirstNameEdit:e.first_name,AddressLastNameEdit:e.last_name,AddressCompanyEdit:e.company,AddressAddress1Edit:e.address1,AddressAddress2Edit:e.address2,AddressCityEdit:e.city,AddressZipEdit:e.zip,AddressPhoneEdit:e.phone};Object.entries(s).forEach(([e,t])=>{const s=document.getElementById(e);s&&t&&(s.value=t)});const n=document.getElementById("AddressCountryEdit"),a=document.getElementById("AddressProvinceContainerEdit"),r=document.getElementById("AddressProvinceEdit");n&&e.country&&(n.value=e.country,this.updateProvinceOptions(n,r,a,e.province))}handleDeleteAddress(e){const t=e.target.getAttribute("data-target"),s=e.target.getAttribute("data-confirm-message");if(confirm(s)){const e=document.createElement("form");e.method="post",e.action=t;const s=document.createElement("input");s.type="hidden",s.name="_method",s.value="delete";const n=document.createElement("input");n.type="hidden",n.name="authenticity_token",n.value=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",e.appendChild(s),e.appendChild(n),document.body.appendChild(e),e.submit()}}setupCountryProvinceSelectors(){const e=document.getElementById("AddressCountryNew"),t=document.getElementById("AddressProvinceNew"),s=document.getElementById("AddressProvinceContainerNew");e&&e.addEventListener("change",()=>{this.updateProvinceOptions(e,t,s)});const n=document.getElementById("AddressCountryEdit"),a=document.getElementById("AddressProvinceEdit"),r=document.getElementById("AddressProvinceContainerEdit");n&&n.addEventListener("change",()=>{this.updateProvinceOptions(n,a,r)})}updateProvinceOptions(e,t,s,n=null){const a=e.value;if(!a||!window.Countries||!window.Countries[a])return void(s.style.display="none");const r=window.Countries[a].provinces;r&&0!==r.length?(t.innerHTML="",r.forEach(e=>{const s=document.createElement("option");s.value=e[0],s.textContent=e[1],n&&e[0]===n&&(s.selected=!0),t.appendChild(s)}),s.style.display="block"):s.style.display="none"}}if(document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".customer.addresses")&&new o}),document.addEventListener("click",e=>{if(e.target.classList.contains("address-form-modal")){const t=e.target.querySelector(".address-form-modal__close");t&&t.click()}}),document.addEventListener("keydown",e=>{if("Escape"===e.key){const e=document.querySelector(".address-form-modal:not([hidden])");if(e){const t=e.querySelector(".address-form-modal__close");t&&t.click()}}}),window.Countries=window.Countries||{},window.Countries={"United States":{provinces:[["AL","Alabama"],["AK","Alaska"],["AZ","Arizona"],["AR","Arkansas"],["CA","California"],["CO","Colorado"],["CT","Connecticut"],["DE","Delaware"],["FL","Florida"],["GA","Georgia"],["HI","Hawaii"],["ID","Idaho"],["IL","Illinois"],["IN","Indiana"],["IA","Iowa"],["KS","Kansas"],["KY","Kentucky"],["LA","Louisiana"],["ME","Maine"],["MD","Maryland"],["MA","Massachusetts"],["MI","Michigan"],["MN","Minnesota"],["MS","Mississippi"],["MO","Missouri"],["MT","Montana"],["NE","Nebraska"],["NV","Nevada"],["NH","New Hampshire"],["NJ","New Jersey"],["NM","New Mexico"],["NY","New York"],["NC","North Carolina"],["ND","North Dakota"],["OH","Ohio"],["OK","Oklahoma"],["OR","Oregon"],["PA","Pennsylvania"],["RI","Rhode Island"],["SC","South Carolina"],["SD","South Dakota"],["TN","Tennessee"],["TX","Texas"],["UT","Utah"],["VT","Vermont"],["VA","Virginia"],["WA","Washington"],["WV","West Virginia"],["WI","Wisconsin"],["WY","Wyoming"]]},Canada:{provinces:[["AB","Alberta"],["BC","British Columbia"],["MB","Manitoba"],["NB","New Brunswick"],["NL","Newfoundland and Labrador"],["NT","Northwest Territories"],["NS","Nova Scotia"],["NU","Nunavut"],["ON","Ontario"],["PE","Prince Edward Island"],["QC","Quebec"],["SK","Saskatchewan"],["YT","Yukon"]]}},"undefined"==typeof MediaGallery){class e extends HTMLElement{constructor(){super(),this.mainImage=null,this.thumbnails=[],this.currentIndex=0,this.zoomEnabled=!1}connectedCallback(){this.mainImage=this.querySelector(".media-gallery__main-image"),this.thumbnails=Array.from(this.querySelectorAll(".media-gallery__thumbnail")),this.setupThumbnails(),this.setupZoom(),this.setupKeyboardNavigation()}setupThumbnails(){this.thumbnails.forEach((e,t)=>{e.addEventListener("click",()=>this.selectImage(t)),e.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.selectImage(t))})})}setupZoom(){this.mainImage&&(this.mainImage.addEventListener("mouseenter",()=>{this.zoomEnabled=!0,this.mainImage.classList.add("media-gallery__main-image--zoom-enabled")}),this.mainImage.addEventListener("mouseleave",()=>{this.zoomEnabled=!1,this.mainImage.classList.remove("media-gallery__main-image--zoom-enabled")}),this.mainImage.addEventListener("mousemove",e=>{this.zoomEnabled&&this.handleZoom(e)}))}setupKeyboardNavigation(){this.addEventListener("keydown",e=>{switch(e.key){case"ArrowLeft":e.preventDefault(),this.previousImage();break;case"ArrowRight":e.preventDefault(),this.nextImage();break;case"Home":e.preventDefault(),this.selectImage(0);break;case"End":e.preventDefault(),this.selectImage(this.thumbnails.length-1)}})}selectImage(e){if(e<0||e>=this.thumbnails.length)return;this.currentIndex=e;const t=this.thumbnails[e],s=t.dataset.fullImage||t.src;this.mainImage&&(this.mainImage.src=s,this.mainImage.alt=t.alt||""),this.thumbnails.forEach((t,s)=>{t.classList.toggle("media-gallery__thumbnail--active",s===e),t.setAttribute("aria-current",s===e?"true":"false")}),t.focus(),this.dispatchEvent(new CustomEvent("media-gallery:image-changed",{detail:{index:e,imageSrc:s}}))}previousImage(){const e=this.currentIndex>0?this.currentIndex-1:this.thumbnails.length-1;this.selectImage(e)}nextImage(){const e=this.currentIndex<this.thumbnails.length-1?this.currentIndex+1:0;this.selectImage(e)}handleZoom(e){if(!this.mainImage)return;const t=this.mainImage.getBoundingClientRect(),s=(e.clientX-t.left)/t.width,n=(e.clientY-t.top)/t.height;this.mainImage.style.transformOrigin=`${100*s}% ${100*n}%`}}customElements.get("media-gallery")||customElements.define("media-gallery",e),window.MediaGallery=e}window.BloxMania&&window.BloxMania.bundles&&window.BloxMania.bundles[e]&&(window.BloxMania.bundles[e].initialized=!0),console.log(`✅ ${e} bundle loaded`)}();