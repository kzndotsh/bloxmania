!function(){"use strict";const e="helpers";if(window.BloxMania&&window.BloxMania.bundles&&(window.BloxMania.bundles[e]={version:"1.0.0",loaded:!0,timestamp:Date.now()}),"undefined"==typeof SectionId){class e{constructor(e){this.value=e}static getIdForSection(t){if(!t)return null;const n=t.dataset.sectionId||t.id||t.closest("[data-section-id]")?.dataset.sectionId||t.closest("[id]")?.id;return n?new e(n):null}static parseId(t){if(!t)return null;const n=[/[?&]section_id=([^&]+)/,/[?&]sections=([^&]+)/,/#([^&?]+)/,/sections\/([^\/]+)/];for(const r of n){const n=t.match(r);if(n)return new e(n[1])}return null}getSection(){return document.getElementById(this.value)||document.querySelector(`[data-section-id="${this.value}"]`)}getSettings(){const e=this.getSection();return e?e.querySelector('script[type="application/json"]'):null}parseSettings(){const e=this.getSettings();if(!e)return null;try{return JSON.parse(e.textContent)}catch(e){return console.error("Error parsing section settings:",e),null}}updateSettings(e){const t=this.getSettings();t&&(t.textContent=JSON.stringify(e))}getBlocks(){const e=this.getSection();return e?e.querySelectorAll("[data-block-id]"):[]}getBlock(e){const t=this.getSection();return t?t.querySelector(`[data-block-id="${e}"]`):null}generateUrl(e={}){const t=new URL(window.location.href);return t.searchParams.set("section_id",this.value),Object.entries(e).forEach(([e,n])=>{t.searchParams.set(e,n)}),t.toString()}exists(){return!!this.getSection()}getType(){const e=this.getSection();return e&&(e.dataset.sectionType||e.className.match(/section--(\w+)/)?.[1])||null}isVisible(){const e=this.getSection();if(!e)return!1;const t=e.getBoundingClientRect();return t.top<window.innerHeight&&t.bottom>0}toString(){return this.value}}e.getAllSections=function(){const t=document.querySelectorAll('[data-section-id], [id^="shopify-section-"]');return Array.from(t).map(t=>{const n=t.dataset.sectionId||t.id;return new e(n)})},e.getCurrentSection=function(){const t=window.location.hash.slice(1);return t?new e(t):null},window.SectionId=e,"undefined"!=typeof module&&module.exports&&(module.exports=e)}if("undefined"==typeof HTMLUpdateUtility){class e{static updateHTML(e,t,n={}){const{executeScripts:r=!0,preserveScroll:o=!1,focusElement:a=null,onComplete:i=null}=n,s=o?{x:window.scrollX,y:window.scrollY}:null,l=document.createElement("div");l.innerHTML=t;const c=l.querySelectorAll("script"),u=[];r&&c.forEach(e=>{const t=document.createElement("script");if(Array.from(e.attributes).forEach(e=>{t.setAttribute(e.name,e.value)}),e.src||(t.textContent=e.textContent),e.src){const e=new Promise((e,n)=>{t.onload=e,t.onerror=n});u.push(e)}e.parentNode.replaceChild(t,e)}),e.innerHTML=l.innerHTML,Promise.all(u).then(()=>{if(s&&window.scrollTo(s.x,s.y),a){const t="string"==typeof a?e.querySelector(a):a;t&&t.focus()}i&&i(e),e.dispatchEvent(new CustomEvent("html:updated",{detail:{targetElement:e,newHTML:t}}))}).catch(e=>{console.error("Error loading scripts during HTML update:",e)})}static updateSections(e,t={}){Object.entries(e).forEach(([e,n])=>{const r=document.getElementById(e);r&&this.updateHTML(r,n,t)})}static parseHTML(e){const t=(new DOMParser).parseFromString(e,"text/html"),n=document.createDocumentFragment();for(;t.body.firstChild;)n.appendChild(t.body.firstChild);return n}static extractElement(e,t){const n=document.createElement("div");return n.innerHTML=e,n.querySelector(t)}static mergeAttributes(e,t,n=["id","class"]){Array.from(t.attributes).forEach(t=>{n.includes(t.name)||e.setAttribute(t.name,t.value)})}}window.HTMLUpdateUtility=e,"undefined"!=typeof module&&module.exports&&(module.exports=e)}class t{constructor(){this.liveRegions=new Map,this.readingOrder=[],this.currentAnnouncement=null,this.init()}init(){this.setupLiveRegions(),this.optimizeImages(),this.optimizeLinks(),this.optimizeForms(),this.optimizeButtons(),this.optimizeHeadings(),this.optimizeNavigation(),this.optimizeTables(),this.optimizeContent(),this.setupDynamicContentAnnouncements()}setupLiveRegions(){if(window.AccessibilityUtils&&!document.getElementById("sr-status")){const e=document.createElement("div");e.id="sr-status",e.className="sr-only",e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),document.body.appendChild(e),this.liveRegions.set("status",e)}}optimizeImages(){document.querySelectorAll("img").forEach(e=>{if(!e.hasAttribute("alt")){const t=this.generateAltText(e);e.alt=t}(""===e.alt||e.hasAttribute("data-decorative"))&&(e.setAttribute("role","presentation"),e.setAttribute("aria-hidden","true")),e.hasAttribute("loading")&&"lazy"===e.loading&&e.addEventListener("load",()=>{e.alt&&""!==e.alt&&this.announce(`Image loaded: ${e.alt}`,"polite")})}),document.querySelectorAll('[style*="background-image"], [data-bg-image]').forEach(e=>{if((e.style.backgroundImage||e.dataset.bgImage)&&!e.hasAttribute("role")){e.setAttribute("role","img");const t=e.dataset.bgAlt||"Background image";e.setAttribute("aria-label",t)}})}optimizeLinks(){document.querySelectorAll("a").forEach(e=>{this.isAmbiguousLink(e)&&this.enhanceLinkContext(e),this.isExternalLink(e)&&this.markExternalLink(e),(e.hasAttribute("download")||this.isDownloadLink(e))&&this.markDownloadLink(e),"_blank"===e.target&&this.markNewWindowLink(e),(e.classList.contains("skip-link")||e.href.startsWith("#"))&&this.optimizeSkipLink(e)})}optimizeForms(){document.querySelectorAll("form").forEach(e=>{if(!e.hasAttribute("aria-label")&&!e.hasAttribute("aria-labelledby")){const t=e.querySelector("h1, h2, h3, h4, h5, h6");t&&(t.id||(t.id=this.generateId("form-heading")),e.setAttribute("aria-labelledby",t.id))}e.querySelectorAll("input, select, textarea").forEach(e=>{this.optimizeFormField(e)}),e.addEventListener("submit",()=>{this.announce("Form submitted. Please wait...","assertive")})})}optimizeButtons(){document.querySelectorAll("button").forEach(e=>{e.hasAttribute("type")||e.setAttribute("type","button"),this.isIconOnlyButton(e)&&this.enhanceIconButton(e),e.hasAttribute("data-loading-text")&&this.setupButtonLoadingAnnouncement(e),e.hasAttribute("aria-pressed")&&this.setupToggleButtonAnnouncement(e)})}optimizeHeadings(){const e=document.querySelectorAll("h1, h2, h3, h4, h5, h6");let t=0;e.forEach(e=>{const n=parseInt(e.tagName.charAt(1));n>t+1&&console.warn(`Heading level skipped: ${e.tagName} after h${t}`,e),t=n,e.id||(e.id=this.generateId("heading"))}),this.createHeadingNavigation(e)}optimizeNavigation(){document.querySelectorAll("nav").forEach(e=>{if(!e.hasAttribute("aria-label")&&!e.hasAttribute("aria-labelledby")){const t=this.generateNavigationLabel(e);e.setAttribute("aria-label",t)}e.querySelectorAll("ul, ol").forEach(e=>{e.hasAttribute("role")||e.setAttribute("role","list")});const t=e.querySelector("a[aria-current], .current, .active");t&&!t.hasAttribute("aria-current")&&t.setAttribute("aria-current","page")})}optimizeTables(){document.querySelectorAll("table").forEach(e=>{if(!e.querySelector("caption")&&!e.hasAttribute("aria-label")){const t=this.generateTableCaption(e);if(t){const n=document.createElement("caption");n.textContent=t,e.insertBefore(n,e.firstChild)}}e.querySelectorAll("th").forEach(t=>{if(!t.hasAttribute("scope")){const n=this.determineHeaderScope(t,e);t.setAttribute("scope",n)}}),this.isComplexTable(e)&&this.addTableSummary(e)})}optimizeContent(){document.querySelectorAll("abbr").forEach(e=>{!e.hasAttribute("title")&&e.dataset.expansion&&e.setAttribute("title",e.dataset.expansion)}),document.querySelectorAll("blockquote").forEach(e=>{e.hasAttribute("role")||e.setAttribute("role","blockquote")}),document.querySelectorAll("pre, code").forEach(e=>{e.hasAttribute("role")||e.setAttribute("role","code")}),document.querySelectorAll("ul, ol").forEach(e=>{e.hasAttribute("role")||e.closest("nav")||e.setAttribute("role","list")})}setupDynamicContentAnnouncements(){document.addEventListener("cart:updated",e=>{const{itemCount:t,total:n}=e.detail;this.announce(`Cart updated. ${t} items, total ${n}`,"polite")}),document.addEventListener("search:results",e=>{const{count:t,query:n}=e.detail;this.announce(`${t} results found for "${n}"`,"polite")}),document.addEventListener("form:error",e=>{const{message:t}=e.detail;this.announce(`Error: ${t}`,"assertive")}),document.addEventListener("loading:start",e=>{const{message:t}=e.detail;this.announce(t||"Loading...","polite")}),document.addEventListener("loading:complete",e=>{const{message:t}=e.detail;this.announce(t||"Loading complete","polite")})}generateAltText(e){const t=[e.dataset.alt,e.title,e.getAttribute("aria-label"),e.closest("figure")?.querySelector("figcaption")?.textContent,e.closest("a")?.getAttribute("aria-label"),e.closest("a")?.title];for(const e of t)if(e&&e.trim())return e.trim();return""}isAmbiguousLink(e){const t=e.textContent.trim().toLowerCase();return["click here","read more","learn more","more","here"].includes(t)}enhanceLinkContext(e){const t=this.findLinkContext(e);if(t){const n=e.getAttribute("aria-label")||"",r=n?`${n} - ${t}`:t;e.setAttribute("aria-label",r)}}findLinkContext(e){const t=[e.closest("article")?.querySelector("h1, h2, h3")?.textContent,e.closest(".card")?.querySelector(".card-title, h1, h2, h3")?.textContent,e.closest("li")?.textContent?.replace(e.textContent,"").trim(),e.previousElementSibling?.textContent];for(const e of t)if(e&&e.trim()&&e.length>3)return e.trim().substring(0,100);return null}isExternalLink(e){return e.hostname&&e.hostname!==window.location.hostname}markExternalLink(e){const t=e.getAttribute("aria-label")||e.textContent;if(e.setAttribute("aria-label",`${t} (external link)`),!e.querySelector(".external-icon")){const t=document.createElement("span");t.className="external-icon sr-only",t.textContent=" (external link)",e.appendChild(t)}}isDownloadLink(e){return[".pdf",".doc",".docx",".xls",".xlsx",".zip",".rar"].some(t=>e.href.toLowerCase().includes(t))}markDownloadLink(e){const t=e.getAttribute("aria-label")||e.textContent;e.setAttribute("aria-label",`${t} (download)`)}markNewWindowLink(e){const t=e.getAttribute("aria-label")||e.textContent;e.setAttribute("aria-label",`${t} (opens in new window)`)}optimizeSkipLink(e){e.addEventListener("click",t=>{const n=document.querySelector(e.getAttribute("href"));n&&(n.hasAttribute("tabindex")||n.setAttribute("tabindex","-1"),setTimeout(()=>{n.focus(),this.announce(`Skipped to ${n.textContent||n.getAttribute("aria-label")||"content"}`,"polite")},100))})}optimizeFormField(e){if(!e.hasAttribute("aria-label")&&!e.hasAttribute("aria-labelledby")){const t=e.closest(".form-group, .input-group")?.querySelector("label");t&&(t.id||(t.id=this.generateId("label")),e.setAttribute("aria-labelledby",t.id))}e.hasAttribute("required")&&e.setAttribute("aria-required","true"),e.addEventListener("invalid",()=>{this.announce(`Error in ${this.getFieldLabel(e)}: ${e.validationMessage}`,"assertive")})}isIconOnlyButton(e){const t=e.textContent.trim();return e.querySelector('svg, .icon, [class*="icon"]')&&(!t||t.length<3)}enhanceIconButton(e){if(!e.hasAttribute("aria-label")){const t=this.generateIconButtonLabel(e);t&&e.setAttribute("aria-label",t)}}generateIconButtonLabel(e){const t=[e.title,e.dataset.label,e.closest("[data-tooltip]")?.dataset.tooltip,e.className.includes("cart")?"Shopping cart":null,e.className.includes("search")?"Search":null,e.className.includes("menu")?"Menu":null,e.className.includes("close")?"Close":null];for(const e of t)if(e&&e.trim())return e.trim();return"Button"}announce(e,t="polite"){if(window.AccessibilityUtils&&window.AccessibilityUtils.announce)window.AccessibilityUtils.announce(e,t);else{const t=document.getElementById("sr-announcements");t&&(t.textContent="",setTimeout(()=>{t.textContent=e},100))}}generateId(e="sr"){return`${e}-${Math.random().toString(36).substr(2,9)}`}getFieldLabel(e){const t=document.querySelector(`label[for="${e.id}"]`)||e.closest(".form-group, .input-group")?.querySelector("label");return t?.textContent||e.name||e.placeholder||"Field"}generateNavigationLabel(e){return e.closest("header")?"Main navigation":e.closest("footer")?"Footer navigation":e.classList.contains("breadcrumb")?"Breadcrumb navigation":"Navigation"}createHeadingNavigation(e){if(e.length<3)return;const t=document.createElement("nav");t.className="heading-navigation sr-only",t.setAttribute("aria-label","Page headings");const n=document.createElement("ul");e.forEach(e=>{const t=document.createElement("li"),r=document.createElement("a");r.href=`#${e.id}`,r.textContent=e.textContent,t.appendChild(r),n.appendChild(t)}),t.appendChild(n),document.body.insertBefore(t,document.body.firstChild)}generateTableCaption(e){const t=e.querySelectorAll("th");return t.length>0?`Table with ${t.length} columns`:"Data table"}determineHeaderScope(e,t){const n=e.closest("tr"),r=Array.from(t.rows).indexOf(n),o=Array.from(n.cells).indexOf(e);return 0===r?"col":0===o?"row":"col"}isComplexTable(e){return e.querySelectorAll("th").length>6||e.rows.length>10||e.querySelector("thead, tbody, tfoot")}addTableSummary(e){if(!e.hasAttribute("aria-describedby")){const t=document.createElement("div");t.id=this.generateId("table-summary"),t.className="sr-only",t.textContent=this.generateTableSummary(e),e.parentNode.insertBefore(t,e),e.setAttribute("aria-describedby",t.id)}}generateTableSummary(e){return`Complex table with ${e.rows.length} rows and ${e.rows[0]?.cells.length||0} columns. Use arrow keys to navigate.`}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.screenReaderOptimization=new t}):window.screenReaderOptimization=new t,"undefined"!=typeof module&&module.exports&&(module.exports=t);class n{constructor(){this.init()}init(){this.setupSkipLinks(),this.setupFocusRing(),this.setupKeyboardNavigation(),this.setupScreenReaderAnnouncements(),this.enhanceExistingElements()}setupSkipLinks(){}setupFocusRing(){document.addEventListener("keydown",e=>{"Tab"===e.key&&document.body.classList.add("keyboard-focus")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-focus")})}setupKeyboardNavigation(){document.querySelectorAll('.dropdown, [aria-haspopup="true"]').forEach(e=>{if(e.hasAttribute("data-keyboard-nav"))return;e.setAttribute("data-keyboard-nav","true");const t=e.querySelector("button, [aria-expanded]"),n=e.querySelector('[role="menu"], .dropdown-menu');if(!t||!n)return;t.hasAttribute("aria-expanded")||t.setAttribute("aria-expanded","false"),t.hasAttribute("aria-haspopup")||t.setAttribute("aria-haspopup","true"),n.hasAttribute("role")||n.setAttribute("role","menu");const r=n.querySelectorAll('a, button, [role="menuitem"]');r.forEach(e=>{e.hasAttribute("role")||e.setAttribute("role","menuitem"),e.hasAttribute("tabindex")||e.setAttribute("tabindex","-1")}),t.addEventListener("keydown",e=>{"ArrowDown"!==e.key&&"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.setAttribute("aria-expanded","true"),r[0]?.focus())}),n.addEventListener("keydown",e=>{const n=Array.from(r).indexOf(document.activeElement);switch(e.key){case"ArrowDown":e.preventDefault(),n<r.length-1?r[n+1].focus():r[0].focus();break;case"ArrowUp":e.preventDefault(),n>0?r[n-1].focus():r[r.length-1].focus();break;case"Escape":e.preventDefault(),t.setAttribute("aria-expanded","false"),t.focus();break;case"Tab":e.shiftKey||n!==r.length-1?e.shiftKey&&0===n&&t.setAttribute("aria-expanded","false"):t.setAttribute("aria-expanded","false")}}),document.addEventListener("click",n=>{e.contains(n.target)||t.setAttribute("aria-expanded","false")})}),document.querySelectorAll('[role="tablist"]').forEach(e=>{if(e.hasAttribute("data-keyboard-nav"))return;e.setAttribute("data-keyboard-nav","true");const t=e.querySelectorAll('[role="tab"]');e.addEventListener("keydown",e=>{const n=Array.from(t).indexOf(document.activeElement);if(-1!==n)switch(e.key){case"ArrowRight":e.preventDefault(),n<t.length-1?(t[n+1].focus(),t[n+1].click()):(t[0].focus(),t[0].click());break;case"ArrowLeft":e.preventDefault(),n>0?(t[n-1].focus(),t[n-1].click()):(t[t.length-1].focus(),t[t.length-1].click());break;case"Home":e.preventDefault(),t[0].focus(),t[0].click();break;case"End":e.preventDefault(),t[t.length-1].focus(),t[t.length-1].click()}})})}setupScreenReaderAnnouncements(){if(!document.getElementById("sr-announcements")){const e=document.createElement("div");e.id="sr-announcements",e.className="sr-only",e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),document.body.appendChild(e)}}enhanceExistingElements(){document.querySelectorAll("img:not([alt])").forEach(e=>{e.alt=""}),document.querySelectorAll("header:not([role])").forEach(e=>{e.setAttribute("role","banner")}),document.querySelectorAll("footer:not([role])").forEach(e=>{e.setAttribute("role","contentinfo")}),document.querySelectorAll("nav:not([role])").forEach(e=>{e.setAttribute("role","navigation"),e.hasAttribute("aria-label")||e.setAttribute("aria-label","Main")}),document.querySelectorAll("main:not([role])").forEach(e=>{e.setAttribute("role","main")}),document.querySelectorAll("button:not([type])").forEach(e=>{e.setAttribute("type","button")}),document.querySelectorAll("input:not([aria-label]):not([aria-labelledby])").forEach(e=>{const t=e.id;if(t){if(!document.querySelector(`label[for="${t}"]`)){const n=document.createElement("label");n.htmlFor=t,n.className="sr-only",n.textContent=e.placeholder||e.name||"Input field",e.parentNode.insertBefore(n,e)}}else e.placeholder&&e.setAttribute("aria-label",e.placeholder)})}getFocusableElements(e=document){return DOMUtils.getFocusableElements(e)}trapFocus(e){const t=this.getFocusableElements(e);if(0===t.length)return()=>{};const n=t[0],r=t[t.length-1];n.focus();const o=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===n&&(e.preventDefault(),r.focus()):document.activeElement===r&&(e.preventDefault(),n.focus()))};return e.addEventListener("keydown",o),()=>{e.removeEventListener("keydown",o)}}announce(e,t="polite"){const n=document.getElementById("sr-announcements");n&&(n.textContent="",n.setAttribute("aria-live",t),setTimeout(()=>{n.textContent=e},100),setTimeout(()=>{n.textContent=""},5e3))}createScreenReaderText(e,t="span"){const n=document.createElement(t);return n.className="sr-only",n.textContent=e,n}addLoadingAnnouncement(e,t="Loading...",n="Content loaded"){e.setAttribute("aria-busy","true"),this.announce(t);const r=new MutationObserver(()=>{e.hasAttribute("aria-busy")&&"false"!==e.getAttribute("aria-busy")||(this.announce(n),r.disconnect())});r.observe(e,{attributes:!0,attributeFilter:["aria-busy"]})}enhanceFormAccessibility(e){e.querySelectorAll("input, select, textarea").forEach(e=>{e.hasAttribute("required")&&!e.hasAttribute("aria-required")&&e.setAttribute("aria-required","true"),e.addEventListener("invalid",t=>{const n=`${e.id||e.name}-error`;let r=document.getElementById(n);r||(r=document.createElement("div"),r.id=n,r.className="error-message",r.setAttribute("role","alert"),e.parentNode.insertBefore(r,e.nextSibling)),r.textContent=e.validationMessage,e.setAttribute("aria-describedby",n),e.setAttribute("aria-invalid","true")}),e.addEventListener("input",()=>{if(e.validity.valid){e.removeAttribute("aria-invalid");const t=`${e.id||e.name}-error`,n=document.getElementById(t);n&&(n.textContent="")}})})}checkColorContrast(e){const t=window.getComputedStyle(e);return{backgroundColor:t.backgroundColor,color:t.color,warning:"Use a proper contrast checking tool for accurate results"}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.accessibilityUtils=new n}):window.accessibilityUtils=new n,"undefined"!=typeof module&&module.exports&&(module.exports=n);class r{constructor(){this.shortcuts=new Map,this.focusHistory=[],this.currentFocusIndex=-1,this.isKeyboardUser=!1,this.init()}init(){this.setupKeyboardDetection(),this.setupGlobalKeyboardShortcuts(),this.setupFocusManagement(),this.setupCustomElements(),this.setupModalNavigation(),this.setupTableNavigation(),this.setupCarouselNavigation()}setupKeyboardDetection(){document.addEventListener("keydown",e=>{"Tab"===e.key&&(this.isKeyboardUser=!0,document.body.classList.add("keyboard-user"))}),document.addEventListener("mousedown",()=>{this.isKeyboardUser=!1,document.body.classList.remove("keyboard-user")}),document.addEventListener("touchstart",()=>{this.isKeyboardUser=!1,document.body.classList.remove("keyboard-user")})}setupGlobalKeyboardShortcuts(){}setupFocusManagement(){document.addEventListener("focusin",e=>{this.isKeyboardUser&&this.addToFocusHistory(e.target)}),document.addEventListener("keydown",e=>{e.altKey&&"ArrowLeft"===e.key?(e.preventDefault(),this.focusPrevious()):e.altKey&&"ArrowRight"===e.key&&(e.preventDefault(),this.focusNext())}),document.addEventListener("focusin",e=>{this.isKeyboardUser&&this.ensureFocusVisible(e.target)})}setupCustomElements(){this.setupProductCardNavigation(),this.setupFormNavigation(),this.setupButtonGroupNavigation()}setupProductCardNavigation(){document.querySelectorAll(".product-card, .card-product").forEach(e=>{e.hasAttribute("data-keyboard-nav")||(e.setAttribute("data-keyboard-nav","true"),e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.hasAttribute("role")||e.setAttribute("role","article"),e.addEventListener("keydown",t=>{switch(t.key){case"Enter":case" ":t.preventDefault();const n=e.querySelector("a");n&&n.click();break;case"ArrowRight":case"ArrowDown":t.preventDefault(),this.focusNextCard(e);break;case"ArrowLeft":case"ArrowUp":t.preventDefault(),this.focusPreviousCard(e)}}))})}setupFormNavigation(){document.querySelectorAll("form").forEach(e=>{e.hasAttribute("data-keyboard-nav")||(e.setAttribute("data-keyboard-nav","true"),e.addEventListener("keydown",t=>{t.ctrlKey&&"Enter"===t.key&&(t.preventDefault(),e.submit())}))})}setupButtonGroupNavigation(){document.querySelectorAll(".button-group, .btn-group").forEach(e=>{if(e.hasAttribute("data-keyboard-nav"))return;e.setAttribute("data-keyboard-nav","true");const t=e.querySelectorAll('button, [role="button"]');t.forEach((e,t)=>{e.setAttribute("tabindex",0===t?"0":"-1")}),e.addEventListener("keydown",e=>{const n=Array.from(t).indexOf(e.target);if(-1===n)return;let r=n;switch(e.key){case"ArrowRight":case"ArrowDown":e.preventDefault(),r=(n+1)%t.length;break;case"ArrowLeft":case"ArrowUp":e.preventDefault(),r=(n-1+t.length)%t.length;break;case"Home":e.preventDefault(),r=0;break;case"End":e.preventDefault(),r=t.length-1;break;default:return}t[n].setAttribute("tabindex","-1"),t[r].setAttribute("tabindex","0"),t[r].focus()})})}setupModalNavigation(){document.addEventListener("keydown",e=>{const t=document.querySelector('.modal.active, [role="dialog"][aria-hidden="false"]');t&&"Tab"===e.key&&this.trapFocusInModal(e,t)})}setupTableNavigation(){document.querySelectorAll("table").forEach(e=>{e.hasAttribute("data-keyboard-nav")||(e.setAttribute("data-keyboard-nav","true"),e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.addEventListener("keydown",t=>{if(!this.isKeyboardUser)return;const n=e.querySelectorAll("td, th"),r=t.target.closest("td, th");if(!r)return;const o=Array.from(n).indexOf(r),a=e.rows[0]?.cells.length||0;e.rows.length;let i=o;switch(t.key){case"ArrowRight":t.preventDefault(),i=Math.min(o+1,n.length-1);break;case"ArrowLeft":t.preventDefault(),i=Math.max(o-1,0);break;case"ArrowDown":t.preventDefault(),i=Math.min(o+a,n.length-1);break;case"ArrowUp":t.preventDefault(),i=Math.max(o-a,0);break;case"Home":t.preventDefault(),i=Math.floor(o/a)*a;break;case"End":t.preventDefault(),i=Math.min((Math.floor(o/a)+1)*a-1,n.length-1);break;default:return}n[i]&&n[i].focus()}),e.querySelectorAll("td, th").forEach(e=>{e.hasAttribute("tabindex")||e.setAttribute("tabindex","-1")}))})}setupCarouselNavigation(){document.querySelectorAll(".carousel, .slider").forEach(e=>{e.hasAttribute("data-keyboard-nav")||(e.setAttribute("data-keyboard-nav","true"),e.addEventListener("keydown",t=>{switch(t.key){case"ArrowLeft":t.preventDefault(),this.carouselPrevious(e);break;case"ArrowRight":t.preventDefault(),this.carouselNext(e);break;case"Home":t.preventDefault(),this.carouselGoTo(e,0);break;case"End":t.preventDefault();const n=e.querySelectorAll(".slide, .carousel-item");this.carouselGoTo(e,n.length-1)}}))})}registerShortcut(e,t,n){this.shortcuts.set(e,{handler:t,description:n})}isTypingContext(e){const t=e.isContentEditable;return["INPUT","TEXTAREA","SELECT"].includes(e.tagName)||t}addToFocusHistory(e){const t=this.focusHistory.indexOf(e);-1!==t&&this.focusHistory.splice(t,1),this.focusHistory.push(e),this.currentFocusIndex=this.focusHistory.length-1,this.focusHistory.length>50&&(this.focusHistory.shift(),this.currentFocusIndex--)}focusPrevious(){if(this.currentFocusIndex>0){this.currentFocusIndex--;const e=this.focusHistory[this.currentFocusIndex];e&&document.contains(e)&&e.focus()}}focusNext(){if(this.currentFocusIndex<this.focusHistory.length-1){this.currentFocusIndex++;const e=this.focusHistory[this.currentFocusIndex];e&&document.contains(e)&&e.focus()}}ensureFocusVisible(e){e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}),e.classList.add("keyboard-focused"),setTimeout(()=>{e.classList.remove("keyboard-focused")},2e3)}focusNextCard(e){const t=document.querySelectorAll(".product-card, .card-product"),n=(Array.from(t).indexOf(e)+1)%t.length;t[n]&&t[n].focus()}focusPreviousCard(e){const t=document.querySelectorAll(".product-card, .card-product"),n=(Array.from(t).indexOf(e)-1+t.length)%t.length;t[n]&&t[n].focus()}trapFocusInModal(e,t){const n=t.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select, [tabindex]:not([tabindex="-1"])'),r=n[0],o=n[n.length-1];e.shiftKey&&document.activeElement===r?(e.preventDefault(),o.focus()):e.shiftKey||document.activeElement!==o||(e.preventDefault(),r.focus())}closeModal(e){e.classList.remove("active"),e.setAttribute("aria-hidden","true");const t=document.querySelector(`[aria-controls="${e.id}"]`);t&&t.focus()}carouselPrevious(e){const t=e.querySelector(".carousel-prev, .slider-prev");t&&t.click()}carouselNext(e){const t=e.querySelector(".carousel-next, .slider-next");t&&t.click()}carouselGoTo(e,t){const n=e.querySelectorAll(".carousel-indicator, .slider-dot");n[t]&&n[t].click()}getShortcuts(){const e=[];return this.shortcuts.forEach((t,n)=>{e.push({key:n,description:t.description})}),e}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.keyboardNavigation=new r}):window.keyboardNavigation=new r,"undefined"!=typeof module&&module.exports&&(module.exports=r),window.BloxMania&&window.BloxMania.bundles&&window.BloxMania.bundles[e]&&(window.BloxMania.bundles[e].initialized=!0),console.log(`âœ… ${e} bundle loaded`)}();