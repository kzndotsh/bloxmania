{% comment %}
  Mobile Menu Component

  Usage:
    {% render 'layout-mobile-menu',
      menu: linklists.main-menu,
      classes: 'custom-class'
    %}

  Parameters:
    - menu (optional): Menu object (default: linklists.main-menu)
    - classes (optional): Additional CSS classes
{% endcomment %}

{%- liquid
  assign menu = menu | default: linklists['main-menu']
  assign classes = classes | default: ''
  assign all_classes = 'mobile-menu fixed inset-0 bg-black/95 backdrop-blur-sm z-50 flex-col items-center justify-center p-8 hidden' | append: ' ' | append: classes
-%}

<div class="{{ all_classes }}" id="mobile-menu">
  <div class="absolute top-6 right-6">
    <button
      class="mobile-menu-close text-white hover:text-primary transition-colors duration-300 p-2"
      aria-label="Close mobile menu"
    >
      {% render 'ui-icon', name: 'close', classes: 'w-6 h-6' %}
    </button>
  </div>

  <div class="text-center">
    <div class="mb-12">
      {% if section.settings.logo != blank %}
        <img
          src="{{ section.settings.logo | image_url: width: 200 }}"
          alt="{{ shop.name }}"
          class="h-16 w-auto mx-auto mb-6"
          width="200"
          height="60"
        >
      {% else %}
        <h1 class="text-2xl font-bold text-white">{{ shop.name }}</h1>
      {% endif %}
    </div>

    <nav class="space-y-8">
      {% for link in menu.links %}
        <a
          href="{{ link.url }}"
          class="block text-xl font-medium text-white hover:text-primary transition-colors duration-300 py-2"
        >
          {{ link.title }}
        </a>
      {% endfor %}
    </nav>

    <div class="mt-12 space-y-4">
      {% render 'ui-button', text: 'Shop Now', url: '/collections/all', variant: 'primary', size: 'large' %}

      {% if section.settings.discord_url != blank %}
        {% render 'ui-button',
          text: 'Join Discord',
          url: section.settings.discord_url,
          variant: 'outline',
          size: 'medium',
          icon: 'discord'
        %}
      {% endif %}
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    const mobileMenuClose = document.querySelector('.mobile-menu-close');

    if (mobileMenuToggle && mobileMenu) {
      mobileMenuToggle.addEventListener('click', function () {
        mobileMenu.classList.toggle('hidden');
        mobileMenu.classList.toggle('flex');
      });
    }

    if (mobileMenuClose && mobileMenu) {
      mobileMenuClose.addEventListener('click', function () {
        mobileMenu.classList.add('hidden');
        mobileMenu.classList.remove('flex');
      });
    }

    // Close menu when clicking outside
    if (mobileMenu) {
      mobileMenu.addEventListener('click', function (e) {
        if (e.target === mobileMenu) {
          mobileMenu.classList.add('hidden');
          mobileMenu.classList.remove('flex');
        }
      });
    }
  });
</script>
