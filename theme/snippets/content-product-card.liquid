{% comment %}
  Product Card Component

  Usage:
    {% render 'content-product-card',
      product: product,
      classes: 'custom-class',
      show_vendor: true,
      image_size: 'medium'
    %}

  Parameters:
    - product (required): Shopify product object
    - classes (optional): Additional CSS classes
    - show_vendor (optional): Show product vendor (default: false)
    - image_size (optional): 'small', 'medium', 'large' (default: 'medium')
    - background (optional): Background style variant
{% endcomment %}

{%- liquid
  assign classes = classes | default: ''
  assign show_vendor = show_vendor | default: false
  assign image_size = image_size | default: 'medium'
  assign background = background | default: 'widget'

  case image_size
    when 'small'
      assign image_classes = 'w-24 h-24'
      assign image_width = 96
    when 'medium'
      assign image_classes = 'w-32 h-32 sm:w-36 sm:h-36 lg:w-40 lg:h-40'
      assign image_width = 160
    when 'large'
      assign image_classes = 'w-48 h-48'
      assign image_width = 192
    else
      assign image_classes = 'w-32 h-32 sm:w-36 sm:h-36 lg:w-40 lg:h-40'
      assign image_width = 160
  endcase
-%}

{% render 'ui-card', classes: classes, background: background, padding: 'medium' %}
<div class="h-full flex flex-col">
  <div class="relative group flex-1 flex flex-col justify-center">
    {% if product.featured_image != blank %}
      <img
        src="{{ product.featured_image | image_url: width: image_width }}"
        alt="{{ product.title }}"
        class="{{ image_classes }} mx-auto rounded-xl mb-4 sm:mb-6 transition-all duration-300 group-hover:brightness-110 object-cover"
        width="{{ image_width }}"
        height="{{ image_width }}"
        loading="lazy"
      >
    {% else %}
      <div class="{{ image_classes }} mx-auto rounded-xl mb-4 sm:mb-6 bg-gray-700 flex items-center justify-center text-gray-400 text-xs">
        No Image
      </div>
    {% endif %}
  </div>

  <div class="text-center mt-auto">
    {% if show_vendor and product.vendor != blank %}
      <p class="text-xs text-gray-400 mb-1">{{ product.vendor }}</p>
    {% endif %}

    <h3 class="text-sm sm:text-base font-semibold text-white mb-2 line-clamp-2">
      {{ product.title }}
    </h3>

    <div class="flex items-center justify-center gap-2 mb-4">
      {% if product.compare_at_price > product.price %}
        <span class="text-xs text-gray-400 line-through">
          {{ product.compare_at_price | money }}
        </span>
      {% endif %}
      <span class="text-primary font-bold text-sm sm:text-base">
        {{ product.price | money }}
      </span>
    </div>

    {% if product.available %}
      {% render 'ui-button', text: 'Add to Cart', variant: 'primary', size: 'small', classes: 'w-full' %}
    {% else %}
      {% render 'ui-button', text: 'Sold Out', variant: 'outline', size: 'small', classes: 'w-full', disabled: true %}
    {% endif %}
  </div>
</div>
