---
description: Shopify theme performance optimization guidelines
globs: 
alwaysApply: true
---

# Shopify Theme Performance Guidelines

## Asset Optimization
- Minimize and compress CSS/JS files
- Use WebP images with fallbacks
- Implement lazy loading for images
- Optimize font loading with `font-display: swap`

## Liquid Optimization
```liquid
{% comment %} Good: Check before loop {% endcomment %}
{% if collection.products.size > 0 %}
  {% for product in collection.products limit:10 %}
    <!-- Product content -->
  {% endfor %}
{% endif %}

{% comment %} Good: Use assign for repeated values {% endcomment %}
{% assign product_count = collection.products.size %}
```

## JavaScript Performance
- Load non-critical JS asynchronously
- Use `defer` or `async` attributes
- Minimize DOM queries
- Debounce scroll and resize events

## CSS Performance
```css
/* Good: Use efficient selectors */
.product-card { }

/* Avoid: Overly specific selectors */
body div.container ul li.product-card { }
```

## Image Optimization
- Use appropriate image sizes
- Implement responsive images
- Compress images without quality loss
- Use Shopify's CDN for assets

## Caching Strategy
- Leverage browser caching
- Use Shopify's built-in caching
- Implement service workers when appropriate
- Cache API responses

## Critical Path
- Inline critical CSS
- Defer non-critical CSS
- Load above-the-fold content first
- Minimize render-blocking resources

## Monitoring
- Use Shopify's built-in analytics
- Monitor Core Web Vitals
- Test on real devices
- Use performance profiling tools
