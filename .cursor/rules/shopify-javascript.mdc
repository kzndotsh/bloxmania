---
description: Shopify theme JavaScript development guidelines
globs: *.js
alwaysApply: false
---

# Shopify Theme JavaScript Guidelines

## JavaScript Organization
JavaScript files are located in [theme/assets/](mdc:theme/assets/) directory

## Module Pattern
Use ES6 modules or immediately invoked function expressions (IIFE):
```javascript
// ES6 Module
export function initProductGallery() {
  // Gallery initialization code
}

// IIFE Pattern
(function() {
  'use strict';
  
  function initProductGallery() {
    // Gallery initialization code
  }
  
  // Initialize when DOM is ready
  document.addEventListener('DOMContentLoaded', initProductGallery);
})();
```

## Shopify Objects
Access Shopify objects through the global `window` object:
```javascript
// Product data
const product = window.productData;

// Cart data
const cart = window.cartData;

// Shop data
const shop = window.shopData;
```

## AJAX Requests
Use Shopify's AJAX API for cart operations:
```javascript
// Add to cart
fetch('/cart/add.js', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    items: [{
      id: productId,
      quantity: quantity
    }]
  })
})
.then(response => response.json())
.then(data => {
  // Handle success
})
.catch(error => {
  // Handle error
});
```

## Event Handling
```javascript
// Use event delegation for dynamic content
document.addEventListener('click', function(event) {
  if (event.target.matches('.add-to-cart')) {
    // Handle add to cart
  }
});

// Custom events
document.dispatchEvent(new CustomEvent('cart:updated', {
  detail: { cart: cartData }
}));
```

## Best Practices
- Use strict mode
- Handle errors gracefully
- Optimize for performance
- Use event delegation
- Keep functions small and focused
- Document complex logic
- Test across browsers
