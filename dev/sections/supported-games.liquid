<section class="section container-spacing relative overflow-hidden bg-slate-900">
  <div class="absolute inset-0 bg-gradient-to-r from-primary/3 via-transparent to-secondary/3"></div>
  <div
    class="absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,216,0,0.06),transparent_50%)] opacity-70"
  ></div>
  <div class="max-w-6xl mx-auto text-center relative z-10">
    <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold mb-4 text-white drop-shadow-lg">
      {{ section.settings.title | default: 'Supported Titles' }}
    </h2>

    {% if section.settings.subtitle != blank %}
      <p class="text-base md:text-lg text-gray-300 mb-12">
        {{ section.settings.subtitle }}
      </p>
    {% endif %}

    <div
      class="
        grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-5xl mx-auto
        {% if section.settings.layout == 'grid-4' %}lg:grid-cols-4{% endif %}
        {% if section.settings.layout == 'grid-5' %}lg:grid-cols-5{% endif %}
      "
    >
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'game' %}
            <div
              class="game-card bg-white/5 rounded-2xl p-8 relative border border-white/10 cursor-pointer overflow-hidden transition-all duration-300 backdrop-blur-sm hover:border-primary hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-2"
              {{ block.shopify_attributes }}
            >
              <div class="game-content relative z-10 transition-all duration-300">
                {% if block.settings.game_image != blank %}
                  <img
                    src="{{ block.settings.game_image | image_url: width: 160 }}"
                    alt="{{ block.settings.game_name }}"
                    class="w-40 h-40 mx-auto mb-6 rounded-2xl shadow-lg object-cover"
                    width="160"
                    height="160"
                    loading="lazy"
                  >
                {% else %}
                  <div class="w-40 h-40 mx-auto mb-6 rounded-2xl shadow-lg bg-gray-700 flex items-center justify-center text-gray-400">
                    <svg class="w-16 h-16" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                  </div>
                {% endif %}
                <h2 class="text-lg md:text-xl font-semibold text-white drop-shadow-sm">
                  {{ block.settings.game_name }}
                </h2>
              </div>

              {% if block.settings.is_coming_soon and section.settings.show_coming_soon %}
                <div class="absolute inset-0 bg-black/80 flex items-center justify-center z-20 opacity-0 transition-opacity duration-300 ease-in-out">
                  <div class="text-center text-white">
                    <div class="text-xl md:text-2xl font-bold mb-2 text-primary">
                      {{ block.settings.custom_coming_soon_text | default: section.settings.coming_soon_text }}
                    </div>
                    <div class="text-gray-300 text-sm md:text-base">
                      {{ section.settings.coming_soon_subtext }}
                    </div>
                  </div>
                </div>
              {% endif %}
            </div>
        {% endcase %}
      {% endfor %}

      {% comment %} Fallback content if no blocks {% endcomment %}
      {% if section.blocks.size == 0 %}
        <!-- Grow A Garden -->
        <div class="game-card bg-white/5 rounded-2xl p-8 relative border border-white/10 cursor-pointer overflow-hidden transition-all duration-300 backdrop-blur-sm hover:border-primary hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-2">
          <div class="game-content relative z-10 transition-all duration-300">
            <img
              src="{{ 'image-grow.png' | asset_url }}"
              alt="Grow A Garden"
              class="w-40 h-40 mx-auto mb-6 rounded-2xl shadow-lg"
              width="160"
              height="160"
            >
            <h2 class="text-xl md:text-2xl font-semibold text-white drop-shadow-sm">Grow A Garden</h2>
          </div>
          <div class="absolute inset-0 bg-black/80 flex items-center justify-center z-20 opacity-0 transition-opacity duration-300 ease-in-out">
            <div class="text-center text-white">
              <div class="text-xl md:text-2xl font-bold mb-2 text-primary">Coming Soon</div>
              <div class="text-gray-300 text-sm md:text-base">Stay tuned for updates!</div>
            </div>
          </div>
        </div>

        <!-- Fortnite -->
        <div class="game-card bg-white/5 rounded-2xl p-8 relative border border-white/10 cursor-pointer overflow-hidden transition-all duration-300 backdrop-blur-sm hover:border-primary hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-2">
          <div class="game-content relative z-10 transition-all duration-300">
            <img
              src="{{ 'image-fortnite.png' | asset_url }}"
              alt="Fortnite"
              class="w-40 h-40 mx-auto mb-6 rounded-2xl shadow-lg"
              width="160"
              height="160"
            >
            <h2 class="text-xl md:text-2xl font-semibold text-white drop-shadow-sm">Fortnite</h2>
          </div>
          <div class="absolute inset-0 bg-black/80 flex items-center justify-center z-20 opacity-0 transition-opacity duration-300 ease-in-out">
            <div class="text-center text-white">
              <div class="text-xl md:text-2xl font-bold mb-2 text-primary">Coming Soon</div>
              <div class="text-gray-300 text-sm md:text-base">Stay tuned for updates!</div>
            </div>
          </div>
        </div>

        <!-- Pet Simulator 99 -->
        <div class="game-card bg-white/5 rounded-2xl p-8 relative border border-white/10 cursor-pointer overflow-hidden transition-all duration-300 backdrop-blur-sm hover:border-primary hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-2">
          <div class="game-content relative z-10 transition-all duration-300">
            <img
              src="{{ 'image-petsim.jpg' | asset_url }}"
              alt="Pet Simulator 99"
              class="w-40 h-40 mx-auto mb-6 rounded-2xl shadow-lg object-cover"
              width="160"
              height="160"
            >
            <h2 class="text-xl md:text-2xl font-semibold text-white drop-shadow-sm">Pet Simulator 99</h2>
          </div>
          <div class="absolute inset-0 bg-black/80 flex items-center justify-center z-20 opacity-0 transition-opacity duration-300 ease-in-out">
            <div class="text-center text-white">
              <div class="text-xl md:text-2xl font-bold mb-2 text-primary">Coming Soon</div>
              <div class="text-gray-300 text-sm md:text-base">Stay tuned for updates!</div>
            </div>
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Supported Games",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Supported Titles"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Section Subtitle",
      "default": "Discover the games we support with instant delivery"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout",
      "options": [
        {
          "value": "grid-3",
          "label": "3 Columns"
        },
        {
          "value": "grid-4",
          "label": "4 Columns"
        },
        {
          "value": "grid-5",
          "label": "5 Columns"
        }
      ],
      "default": "grid-3"
    },
    {
      "type": "checkbox",
      "id": "show_coming_soon",
      "label": "Show 'Coming Soon' overlay",
      "default": true
    },
    {
      "type": "text",
      "id": "coming_soon_text",
      "label": "Coming Soon Text",
      "default": "Coming Soon"
    },
    {
      "type": "text",
      "id": "coming_soon_subtext",
      "label": "Coming Soon Subtext",
      "default": "Stay tuned for updates!"
    }
  ],
  "blocks": [
    {
      "type": "game",
      "name": "Game",
      "settings": [
        {
          "type": "image_picker",
          "id": "game_image",
          "label": "Game Image"
        },
        {
          "type": "text",
          "id": "game_name",
          "label": "Game Name",
          "default": "Game Title"
        },
        {
          "type": "url",
          "id": "game_link",
          "label": "Game Link (optional)"
        },
        {
          "type": "checkbox",
          "id": "is_coming_soon",
          "label": "Mark as Coming Soon",
          "default": false
        },
        {
          "type": "text",
          "id": "custom_coming_soon_text",
          "label": "Custom Coming Soon Text",
          "info": "Leave blank to use default"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Supported Games",
      "blocks": [
        {
          "type": "game",
          "settings": {
            "game_name": "Grow A Garden"
          }
        },
        {
          "type": "game",
          "settings": {
            "game_name": "Fortnite"
          }
        },
        {
          "type": "game",
          "settings": {
            "game_name": "Pet Simulator 99"
          }
        }
      ]
    }
  ]
}
{% endschema %}
